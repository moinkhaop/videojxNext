"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/convert/page",{

/***/ "(app-pages-browser)/./src/lib/conversion.ts":
/*!*******************************!*\
  !*** ./src/lib/conversion.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConversionService: () => (/* binding */ ConversionService)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/types */ \"(app-pages-browser)/./src/types/index.ts\");\n/* harmony import */ var _cleanup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cleanup */ \"(app-pages-browser)/./src/lib/cleanup.ts\");\n\n\nclass ConversionService {\n    // 解析视频链接\n    static async parseVideo(videoUrl, parserConfig) {\n        // 首先验证输入参数\n        if (!videoUrl || typeof videoUrl !== 'string' || !videoUrl.trim()) {\n            throw new Error('视频URL为空');\n        }\n        if (!parserConfig || !parserConfig.apiUrl) {\n            throw new Error('解析API配置无效');\n        }\n        try {\n            // 处理分享文本，提取真实URL\n            const extractedUrl = this.extractRealUrl(videoUrl);\n            console.log(\"[转存] 提取到URL: \".concat(extractedUrl));\n            console.log(\"[转存] 发送解析请求，URL: \".concat(extractedUrl.substring(0, 50), \"...\"));\n            const response = await fetch('/api/proxy/parser', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    videoUrl: extractedUrl,\n                    parserConfig\n                })\n            });\n            // {{ AURA: Modify - 添加解析API的JSON错误处理 }}\n            let result;\n            try {\n                const responseText = await response.text();\n                console.log(\"[转存] 解析API响应状态: \".concat(response.status, \", 内容长度: \").concat(responseText.length));\n                if (!responseText.trim()) {\n                    throw new Error(\"解析服务器返回空响应 (HTTP \".concat(response.status, \")\"));\n                }\n                result = JSON.parse(responseText);\n            } catch (parseError) {\n                console.error('[转存] 解析API JSON解析失败:', parseError);\n                console.error('[转存] 解析API响应状态:', response.status, response.statusText);\n                // 尝试获取部分响应内容用于调试\n                const responseText = await response.text().catch(()=>'无法获取响应文本');\n                const truncatedText = responseText.substring(0, 500);\n                throw new Error(\"解析API JSON解析失败 (HTTP \".concat(response.status, \"): \").concat(parseError instanceof Error ? parseError.message : '未知解析错误', \". 响应片段: \").concat(truncatedText));\n            }\n            if (!result.success) {\n                throw new Error(result.error || '视频解析失败');\n            }\n            // 验证返回的数据\n            if (!result.data) {\n                throw new Error('API返回的数据为空');\n            }\n            // {{ AURA: Modify - 移除测试API调用，直接验证数据完整性 }}\n            // 对于视频类型，检查URL字段\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && !result.data.url) {\n                throw new Error('视频解析成功但未返回有效的视频URL');\n            }\n            // 对于视频类型，确保URL字段是有效的网址\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && result.data.url) {\n                try {\n                    new URL(result.data.url);\n                } catch (e) {\n                    throw new Error(\"返回的URL无效: \".concat(result.data.url));\n                }\n            }\n            // 对于图集类型，检查图片数组\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM) {\n                if (!result.data.images || result.data.images.length === 0) {\n                    throw new Error('图集解析成功但没有找到任何图片');\n                }\n                console.log(\"[转存] 图集解析成功，包含 \".concat(result.data.images.length, \" 张图片\"));\n            }\n            console.log(\"[转存] 解析成功，获取到\".concat(result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO ? '视频' : '图集', \": \").concat(result.data.title));\n            // {{ AURA: Modify - 修复图集解析时url.substring错误，添加类型判断 }}\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && result.data.url && typeof result.data.url === 'string') {\n                console.log(\"[转存] 视频URL: \".concat(result.data.url.substring(0, 50), \"...\"));\n            } else if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM && result.data.images) {\n                console.log(\"[转存] 图集包含 \".concat(result.data.images.length, \" 张图片\"));\n            }\n            return result.data;\n        } catch (error) {\n            console.error('[转存] 视频解析错误:', error);\n            throw error;\n        }\n    }\n    // 上传媒体到WebDAV\n    static async uploadToWebDAV(mediaInfo, webdavConfig, folderPath) {\n        const maxRetries = 5; // 增加最大重试次数到5次\n        let attempt = 0;\n        let lastError;\n        // 根据媒体类型生成文件名\n        let fileName = '';\n        if (mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && mediaInfo.url) {\n            // 视频文件名\n            const format = this.inferVideoFormat(mediaInfo.format, mediaInfo.url);\n            fileName = this.generateFileName(mediaInfo.title, format);\n        } else if (mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM && mediaInfo.images && mediaInfo.images.length > 0) {\n            // 图集文件夹名 - 使用解析后的标题名称\n            fileName = this.generateFolderName(mediaInfo.title);\n        }\n        while(attempt < maxRetries){\n            try {\n                attempt++;\n                console.log(\"[转存] WebDAV上传尝试 \".concat(attempt, \"/\").concat(maxRetries, \": \").concat(mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO ? '视频' : '图集'));\n                const response = await fetch('/api/proxy/webdav', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        videoUrl: mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO ? mediaInfo.url : undefined,\n                        images: mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM ? mediaInfo.images : undefined,\n                        webdavConfig,\n                        fileName,\n                        folderPath: folderPath || ''\n                    })\n                });\n                // {{ AURA: Modify - 添加更强的JSON解析错误处理 }}\n                let result;\n                try {\n                    const responseText = await response.text();\n                    console.log(\"[转存] 原始响应状态: \".concat(response.status, \", 内容长度: \").concat(responseText.length));\n                    if (!responseText.trim()) {\n                        throw new Error(\"服务器返回空响应 (HTTP \".concat(response.status, \")\"));\n                    }\n                    result = JSON.parse(responseText);\n                } catch (parseError) {\n                    console.error('[转存] JSON解析失败:', parseError);\n                    console.error('[转存] 响应状态:', response.status, response.statusText);\n                    // 尝试获取部分响应内容用于调试\n                    const responseText = await response.text().catch(()=>'无法获取响应文本');\n                    const truncatedText = responseText.substring(0, 500);\n                    throw new Error(\"JSON解析失败 (HTTP \".concat(response.status, \"): \").concat(parseError instanceof Error ? parseError.message : '未知解析错误', \". 响应片段: \").concat(truncatedText));\n                }\n                if (!result.success) {\n                    var _result_error, _result_error1, _result_error2;\n                    // 对于403/401错误，在第一次尝试时进行重试\n                    const shouldRetryImmediately = (((_result_error = result.error) === null || _result_error === void 0 ? void 0 : _result_error.includes('403')) || ((_result_error1 = result.error) === null || _result_error1 === void 0 ? void 0 : _result_error1.includes('401'))) && attempt === 1;\n                    if (shouldRetryImmediately) {\n                        console.log('[转存] 权限错误，立即进行重试');\n                        // 等待一小段时间后立即重试\n                        await new Promise((resolve)=>setTimeout(resolve, 1000));\n                        continue;\n                    }\n                    // 对于404错误，提供更具体的错误信息\n                    let errorMessage = result.error || '媒体上传失败';\n                    if ((_result_error2 = result.error) === null || _result_error2 === void 0 ? void 0 : _result_error2.includes('404')) {\n                        errorMessage = \"上传路径不存在 (404)。请检查WebDAV服务器地址和路径配置是否正确。错误详情: \".concat(result.error);\n                    }\n                    throw new Error(errorMessage);\n                }\n                console.log(\"[转存] 上传成功，尝试次数: \".concat(attempt));\n                return result.filePath;\n            } catch (error) {\n                lastError = error;\n                console.error(\"[转存] 上传尝试 \".concat(attempt, \" 失败:\"), error);\n                // 检查是否需要重试\n                const shouldRetry = this.shouldRetryUpload(error, attempt);\n                if (attempt < maxRetries && shouldRetry) {\n                    // 使用指数退避策略\n                    const waitTime = Math.min(1000 * Math.pow(2, attempt - 1), 10000); // 最大等待10秒\n                    console.log(\"[转存] 等待 \".concat(waitTime / 1000, \" 秒后重试...\"));\n                    await new Promise((resolve)=>setTimeout(resolve, waitTime));\n                } else {\n                    break; // 不再重试\n                }\n            }\n        }\n        // 所有尝试都失败\n        console.error('[转存] 所有上传尝试均失败');\n        throw lastError || new Error('视频上传失败，已达到最大重试次数');\n    }\n    // 单个视频转存\n    static async convertSingle(task, parserConfig, webdavConfig, onProgress) {\n        try {\n            // 更新状态为解析中\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING;\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(20, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING);\n            console.log(\"[转存] 开始解析视频: \".concat(task.videoUrl));\n            console.log(\"[转存] 使用解析器: \".concat(parserConfig.name, \" (\").concat(parserConfig.apiUrl, \")\"));\n            // 解析视频\n            try {\n                // 添加视频URL格式检查\n                if (!this.isValidUrl(task.videoUrl)) {\n                    throw new Error('视频链接格式无效，请确保以http://或https://开头');\n                }\n                // {{ AURA: Modify - 移除备用测试模式，直接使用主解析结果 }}\n                let parsedInfo;\n                try {\n                    parsedInfo = await this.parseVideo(task.videoUrl, parserConfig);\n                    console.log(\"[转存] 解析成功，媒体类型: \".concat(parsedInfo.mediaType));\n                } catch (parseError) {\n                    console.error('[转存] 解析失败:', parseError);\n                    throw parseError;\n                }\n                task.parsedVideoInfo = parsedInfo;\n                task.videoTitle = parsedInfo.title;\n                console.log(\"[转存] 解析完成: \".concat(parsedInfo.title));\n            } catch (error) {\n                console.error('[转存] 视频解析失败:', error);\n                task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED;\n                let errorMsg = error instanceof Error ? error.message : '视频解析失败';\n                // 添加更友好的错误信息\n                if (errorMsg.includes('URL为空')) {\n                    errorMsg = 'URL为空 - 解析API无法提取视频URL，请尝试其他解析API或检查链接';\n                }\n                task.error = errorMsg;\n                task.completedAt = new Date();\n                return task;\n            }\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(50, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING);\n            // 更新状态为上传中\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.UPLOADING;\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(60, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.UPLOADING);\n            // 上传媒体\n            const filePath = await this.uploadToWebDAV(task.parsedVideoInfo, webdavConfig);\n            // 更新任务状态\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS;\n            task.completedAt = new Date();\n            task.uploadResult = {\n                success: true,\n                filePath\n            };\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(100, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS);\n            // 任务完成后执行清理\n            await _cleanup__WEBPACK_IMPORTED_MODULE_1__.CleanupService.cleanupAfterTaskCompletion(task);\n            return task;\n        } catch (error) {\n            // 更新任务为失败状态\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED;\n            task.completedAt = new Date();\n            task.error = error instanceof Error ? error.message : '转存过程中发生未知错误';\n            task.uploadResult = {\n                success: false,\n                error: task.error\n            };\n            // 任务完成后执行清理\n            await _cleanup__WEBPACK_IMPORTED_MODULE_1__.CleanupService.cleanupAfterTaskCompletion(task);\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(0, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED);\n            return task;\n        }\n    }\n    // 批量转存\n    static async convertBatch(batchTask, onProgress) {\n        batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING;\n        const totalTasks = batchTask.tasks.length;\n        let completedTasks = 0;\n        for(let i = 0; i < batchTask.tasks.length; i++){\n            const task = batchTask.tasks[i];\n            try {\n                // 处理单个任务\n                const updatedTask = await this.convertSingle(task, batchTask.parserConfig, batchTask.webdavConfig, (progress, status)=>{\n                    // 计算总体进度\n                    const taskProgress = (completedTasks + progress / 100) / totalTasks * 100;\n                    onProgress === null || onProgress === void 0 ? void 0 : onProgress(taskProgress, task);\n                });\n                batchTask.tasks[i] = updatedTask;\n                if (updatedTask.status === _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS) {\n                    completedTasks++;\n                }\n            } catch (error) {\n                console.error(\"批量任务中的单个任务失败:\", error);\n            // 继续处理下一个任务\n            }\n            // 更新批量任务状态\n            batchTask.completedTasks = completedTasks;\n            // 计算总体进度\n            const overallProgress = (i + 1) / totalTasks * 100;\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(overallProgress, task);\n            // 添加延迟避免请求过于频繁\n            if (i < batchTask.tasks.length - 1) {\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n            }\n        }\n        // 更新批量任务最终状态\n        batchTask.completedAt = new Date();\n        if (completedTasks === totalTasks) {\n            batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS;\n            // 批量任务完成后执行清理\n            await _cleanup__WEBPACK_IMPORTED_MODULE_1__.CleanupService.cleanupAfterTaskCompletion(batchTask);\n        } else if (completedTasks === 0) {\n            batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED;\n        } else {\n            batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS; // 部分成功也标记为成功\n        }\n        return batchTask;\n    }\n    // 生成文件名\n    static generateFileName(title, format) {\n        // 清理文件名中的非法字符\n        const cleanTitle = title.replace(/[<>:\"/\\\\|?*\\x00-\\x1F]/g, '_') // 移除非法字符和控制字符\n        .replace(/\\s+/g, '_') // 将空格替换为下划线\n        .replace(/_+/g, '_') // 将多个下划线合并为一个\n        .replace(/^_|_$/g, '') // 移除开头和结尾的下划线\n        .substring(0, 100) // 限制长度\n        .trim() // 去除首尾空格\n        ;\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n        return \"\".concat(cleanTitle, \"_\").concat(timestamp, \".\").concat(format);\n    }\n    // 生成文件夹名（用于图集）\n    static generateFolderName(title) {\n        // 清理文件夹名中的非法字符\n        const cleanTitle = title.replace(/[<>:\"/\\\\|?*\\x00-\\x1F]/g, '_') // 移除非法字符和控制字符\n        .replace(/\\s+/g, '_') // 将空格替换为下划线\n        .replace(/_+/g, '_') // 将多个下划线合并为一个\n        .replace(/^_|_$/g, '') // 移除开头和结尾的下划线\n        .substring(0, 100) // 限制长度\n        .trim() // 去除首尾空格\n        ;\n        return cleanTitle;\n    }\n    // 测试WebDAV连接\n    static async testWebDAVConnection(webdavConfig) {\n        try {\n            // 确保URL编码正确，避免特殊字符问题\n            const params = new URLSearchParams({\n                serverUrl: encodeURIComponent(webdavConfig.url),\n                username: encodeURIComponent(webdavConfig.username),\n                password: encodeURIComponent(webdavConfig.password)\n            });\n            console.log(\"[WebDAV] 测试连接: \".concat(webdavConfig.url));\n            const response = await fetch(\"/api/proxy/webdav?\".concat(params.toString()));\n            const result = await response.json();\n            return {\n                success: result.success,\n                message: result.success ? '连接测试成功' : result.error || '连接测试失败'\n            };\n        } catch (error) {\n            console.error('[WebDAV] 连接测试错误:', error);\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : '连接测试失败'\n            };\n        }\n    }\n    // 生成任务ID\n    static generateTaskId() {\n        return \"task_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n    }\n    // 生成批量任务ID\n    static generateBatchId() {\n        return \"batch_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n    }\n    // 解析视频链接列表\n    static parseVideoUrls(text) {\n        const lines = text.split('\\n');\n        const urls = [];\n        for (const line of lines){\n            const trimmed = line.trim();\n            if (trimmed) {\n                // 尝试从包含其他文字的输入中提取URL\n                const extractedUrl = this.extractRealUrl(trimmed);\n                if (extractedUrl && this.isValidUrl(extractedUrl)) {\n                    urls.push(extractedUrl);\n                }\n            }\n        }\n        return urls;\n    }\n    // 验证URL格式\n    static isValidUrl(url) {\n        try {\n            // 首先提取抖音等平台的真实链接\n            const extractedUrl = this.extractRealUrl(url);\n            new URL(extractedUrl);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    // 处理短视频分享文本，提取真实URL\n    static extractRealUrl(input) {\n        // 如果已经是有效URL，直接返回\n        try {\n            new URL(input);\n            return input;\n        } catch (e) {\n        // 不是有效URL，尝试提取\n        }\n        // 处理抖音分享文本格式\n        // 例如: \"7.97 DUL:/ 02/05 z@T.yg 不知道啊被季莹莹抽了之后就这样了# 永劫无间手游 # 季莹莹 # 胡桃 # cos # 猎奇  https://v.douyin.com/d689EsOAlug/ 复制此链接，打开Dou音搜索，直接观看视频！\"\n        // 改进的URL正则表达式，能够更好地匹配各种分享文本中的URL\n        const urlRegex = /(https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&=\\/=]*))/g;\n        const matches = input.match(urlRegex);\n        if (matches && matches.length > 0) {\n            // 返回第一个匹配的URL并移除末尾斜杠\n            return matches[0].replace(/\\/$/, '');\n        }\n        return input;\n    }\n    // 估算文件大小（基于时长）\n    static estimateFileSize(duration) {\n        if (!duration) return 0;\n        // 假设平均码率为 1Mbps\n        return duration * 1024 * 1024 / 8;\n    }\n    // 格式化文件大小\n    static formatFileSize(bytes) {\n        if (bytes === 0) return '0 B';\n        const k = 1024;\n        const sizes = [\n            'B',\n            'KB',\n            'MB',\n            'GB',\n            'TB'\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n    // 格式化时长\n    static formatDuration(seconds) {\n        const hours = Math.floor(seconds / 3600);\n        const minutes = Math.floor(seconds % 3600 / 60);\n        const secs = Math.floor(seconds % 60);\n        if (hours > 0) {\n            return \"\".concat(hours, \":\").concat(minutes.toString().padStart(2, '0'), \":\").concat(secs.toString().padStart(2, '0'));\n        } else {\n            return \"\".concat(minutes, \":\").concat(secs.toString().padStart(2, '0'));\n        }\n    }\n    // {{ AURA: Add - 智能视频格式推断方法 }}\n    static inferVideoFormat(providedFormat, videoUrl) {\n        // 支持的视频格式列表\n        const validFormats = [\n            'mp4',\n            'avi',\n            'mov',\n            'wmv',\n            'flv',\n            'webm',\n            'mkv',\n            'm4v',\n            '3gp',\n            'f4v',\n            'asf',\n            'rm',\n            'rmvb',\n            'vob',\n            'ogv',\n            'm2ts',\n            'mts'\n        ];\n        // 验证提供的格式\n        if (providedFormat && validFormats.includes(providedFormat.toLowerCase())) {\n            return providedFormat.toLowerCase();\n        }\n        // 从URL推断\n        if (videoUrl) {\n            const urlFormat = this.extractFormatFromUrl(videoUrl);\n            if (urlFormat && validFormats.includes(urlFormat.toLowerCase())) {\n                return urlFormat.toLowerCase();\n            }\n        }\n        // 默认mp4\n        return 'mp4';\n    }\n    // {{ AURA: Add - 从URL提取格式扩展名 }}\n    static extractFormatFromUrl(url) {\n        try {\n            const urlObj = new URL(url);\n            const pathname = urlObj.pathname;\n            const lastDotIndex = pathname.lastIndexOf('.');\n            if (lastDotIndex !== -1) {\n                const extension = pathname.substring(lastDotIndex + 1);\n                return extension.toLowerCase();\n            }\n        } catch (e) {\n        // URL解析失败，忽略错误\n        }\n        return null;\n    }\n    // {{ AURA: Add - 验证视频格式是否有效 }}\n    static isValidVideoFormat(format) {\n        const validFormats = [\n            'mp4',\n            'avi',\n            'mov',\n            'wmv',\n            'flv',\n            'webm',\n            'mkv',\n            'm4v',\n            '3gp',\n            'f4v',\n            'asf',\n            'rm',\n            'rmvb',\n            'vob',\n            'ogv',\n            'm2ts',\n            'mts'\n        ];\n        return validFormats.includes(format.toLowerCase());\n    }\n    // {{ AURA: Add - 判断是否应该重试上传 }}\n    static shouldRetryUpload(error, attempt) {\n        // 如果是最后一次尝试，不重试\n        if (attempt >= 5) {\n            return false;\n        }\n        // 检查错误类型\n        if (error) {\n            const errorMessage = error.message || error.toString().toLowerCase();\n            // 对于网络错误始终重试\n            if (errorMessage.includes('network error') || errorMessage.includes('fetch failed') || errorMessage.includes('econnreset') || errorMessage.includes('timeout')) {\n                return true;\n            }\n            // 对于服务器错误(5xx)始终重试\n            if (errorMessage.includes('500') || errorMessage.includes('502') || errorMessage.includes('503') || errorMessage.includes('504')) {\n                return true;\n            }\n            // 对于权限错误(403/401)仅在第一次尝试时重试\n            if ((errorMessage.includes('403') || errorMessage.includes('401')) && attempt === 1) {\n                return true;\n            }\n        }\n        // 默认情况下，对于前几次尝试允许重试\n        return attempt < 3;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY29udmVyc2lvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEg7QUFDbEY7QUFNbkMsTUFBTUc7SUFDWCxTQUFTO0lBQ1QsYUFBYUMsV0FBV0MsUUFBZ0IsRUFBRUMsWUFBK0IsRUFBNEI7UUFDbkcsV0FBVztRQUNYLElBQUksQ0FBQ0QsWUFBWSxPQUFPQSxhQUFhLFlBQVksQ0FBQ0EsU0FBU0UsSUFBSSxJQUFJO1lBQ2pFLE1BQU0sSUFBSUMsTUFBTTtRQUNsQjtRQUVBLElBQUksQ0FBQ0YsZ0JBQWdCLENBQUNBLGFBQWFHLE1BQU0sRUFBRTtZQUN6QyxNQUFNLElBQUlELE1BQU07UUFDbEI7UUFFQSxJQUFJO1lBQ0YsaUJBQWlCO1lBQ2pCLE1BQU1FLGVBQWUsSUFBSSxDQUFDQyxjQUFjLENBQUNOO1lBQ3pDTyxRQUFRQyxHQUFHLENBQUMsZ0JBQTZCLE9BQWJIO1lBQzVCRSxRQUFRQyxHQUFHLENBQUMsb0JBQWtELE9BQTlCSCxhQUFhSSxTQUFTLENBQUMsR0FBRyxLQUFJO1lBRTlELE1BQU1DLFdBQVcsTUFBTUMsTUFBTSxxQkFBcUI7Z0JBQ2hEQyxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7Z0JBQ0FDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztvQkFDbkJoQixVQUFVSztvQkFDVko7Z0JBQ0Y7WUFDRjtZQUVBLHdDQUF3QztZQUN4QyxJQUFJZ0I7WUFDSixJQUFJO2dCQUNGLE1BQU1DLGVBQWUsTUFBTVIsU0FBU1MsSUFBSTtnQkFDeENaLFFBQVFDLEdBQUcsQ0FBQyxtQkFBNkNVLE9BQTFCUixTQUFTVSxNQUFNLEVBQUMsWUFBOEIsT0FBcEJGLGFBQWFHLE1BQU07Z0JBRTVFLElBQUksQ0FBQ0gsYUFBYWhCLElBQUksSUFBSTtvQkFDeEIsTUFBTSxJQUFJQyxNQUFNLG9CQUFvQyxPQUFoQk8sU0FBU1UsTUFBTSxFQUFDO2dCQUN0RDtnQkFFQUgsU0FBU0YsS0FBS08sS0FBSyxD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QjtJQUMvQixPQUFlQyxtQkFBbUJwRyxNQUFjLEVBQVc7UUFDekQsTUFBTTBGLGVBQWU7WUFDbkI7WUFBTztZQUFPO1lBQU87WUFBTztZQUFPO1lBQVE7WUFBTztZQUNsRDtZQUFPO1lBQU87WUFBTztZQUFNO1lBQVE7WUFBTztZQUFPO1lBQVE7U0FDMUQ7UUFDRCxPQUFPQSxhQUFhcEYsUUFBUSxDQUFDTixPQUFPMkYsV0FBVztJQUNqRDtJQUVBLCtCQUErQjtJQUMvQixPQUFlOUUsa0JBQWtCbkMsS0FBVSxFQUFFbUIsT0FBZSxFQUFXO1FBQ3JFLGdCQUFnQjtRQUNoQixJQUFJQSxXQUFXLEdBQUc7WUFDaEIsT0FBTztRQUNUO1FBRUEsU0FBUztRQUNULElBQUluQixPQUFPO1lBQ1QsTUFBTWdDLGVBQWVoQyxNQUFNSSxPQUFPLElBQUlKLE1BQU04RSxRQUFRLEdBQUdtQyxXQUFXO1lBRWxFLGFBQWE7WUFDYixJQUFJakYsYUFBYUosUUFBUSxDQUFDLG9CQUN0QkksYUFBYUosUUFBUSxDQUFDLG1CQUN0QkksYUFBYUosUUFBUSxDQUFDLGlCQUN0QkksYUFBYUosUUFBUSxDQUFDLFlBQVk7Z0JBQ3BDLE9BQU87WUFDVDtZQUVBLG1CQUFtQjtZQUNuQixJQUFJSSxhQUFhSixRQUFRLENBQUMsVUFDdEJJLGFBQWFKLFFBQVEsQ0FBQyxVQUN0QkksYUFBYUosUUFBUSxDQUFDLFVBQ3RCSSxhQUFhSixRQUFRLENBQUMsUUFBUTtnQkFDaEMsT0FBTztZQUNUO1lBRUEsNEJBQTRCO1lBQzVCLElBQUksQ0FBQ0ksYUFBYUosUUFBUSxDQUFDLFVBQVVJLGFBQWFKLFFBQVEsQ0FBQyxNQUFLLEtBQU1ULFlBQVksR0FBRztnQkFDbkYsT0FBTztZQUNUO1FBQ0Y7UUFFQSxvQkFBb0I7UUFDcEIsT0FBT0EsVUFBVTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJEOlxcR2l0SHViXFxkeWp4bmV4dFxcZHlqeFxcc3JjXFxsaWJcXGNvbnZlcnNpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udmVyc2lvblRhc2ssIEJhdGNoVGFzaywgVGFza1N0YXR1cywgVmlkZW9QYXJzZXJDb25maWcsIFdlYkRBVkNvbmZpZywgUGFyc2VkVmlkZW9JbmZvLCBNZWRpYVR5cGUgfSBmcm9tICdAL3R5cGVzJ1xyXG5pbXBvcnQgeyBDbGVhbnVwU2VydmljZSB9IGZyb20gJy4vY2xlYW51cCdcclxuXHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ29udmVyc2lvblNlcnZpY2Uge1xyXG4gIC8vIOino+aekOinhumikemTvuaOpVxyXG4gIHN0YXRpYyBhc3luYyBwYXJzZVZpZGVvKHZpZGVvVXJsOiBzdHJpbmcsIHBhcnNlckNvbmZpZzogVmlkZW9QYXJzZXJDb25maWcpOiBQcm9taXNlPFBhcnNlZFZpZGVvSW5mbz4ge1xyXG4gICAgLy8g6aaW5YWI6aqM6K+B6L6T5YWl5Y+C5pWwXHJcbiAgICBpZiAoIXZpZGVvVXJsIHx8IHR5cGVvZiB2aWRlb1VybCAhPT0gJ3N0cmluZycgfHwgIXZpZGVvVXJsLnRyaW0oKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+inhumikVVSTOS4uuepuicpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICghcGFyc2VyQ29uZmlnIHx8ICFwYXJzZXJDb25maWcuYXBpVXJsKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcign6Kej5p6QQVBJ6YWN572u5peg5pWIJylcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5aSE55CG5YiG5Lqr5paH5pys77yM5o+Q5Y+W55yf5a6eVVJMXHJcbiAgICAgIGNvbnN0IGV4dHJhY3RlZFVybCA9IHRoaXMuZXh0cmFjdFJlYWxVcmwodmlkZW9VcmwpXHJcbiAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDmj5Dlj5bliLBVUkw6ICR7ZXh0cmFjdGVkVXJsfWApXHJcbiAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDlj5HpgIHop6PmnpDor7fmsYLvvIxVUkw6ICR7ZXh0cmFjdGVkVXJsLnN1YnN0cmluZygwLCA1MCl9Li4uYClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvcHJveHkvcGFyc2VyJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICB2aWRlb1VybDogZXh0cmFjdGVkVXJsLCAvLyDkvb/nlKjmj5Dlj5blkI7nmoRVUkxcclxuICAgICAgICAgIHBhcnNlckNvbmZpZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyB7eyBBVVJBOiBNb2RpZnkgLSDmt7vliqDop6PmnpBBUEnnmoRKU09O6ZSZ6K+v5aSE55CGIH19XHJcbiAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDop6PmnpBBUEnlk43lupTnirbmgIE6ICR7cmVzcG9uc2Uuc3RhdHVzfSwg5YaF5a656ZW/5bqmOiAke3Jlc3BvbnNlVGV4dC5sZW5ndGh9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZVRleHQudHJpbSgpKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOino+aekOacjeWKoeWZqOi/lOWbnuepuuWTjeW6lCAoSFRUUCAke3Jlc3BvbnNlLnN0YXR1c30pYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcclxuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIOino+aekEFQSSBKU09O6Kej5p6Q5aSx6LSlOicsIHBhcnNlRXJyb3IpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIOino+aekEFQSeWTjeW6lOeKtuaAgTonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWwneivleiOt+WPlumDqOWIhuWTjeW6lOWGheWuueeUqOS6juiwg+ivlVxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAn5peg5rOV6I635Y+W5ZON5bqU5paH5pysJyk7XHJcbiAgICAgICAgY29uc3QgdHJ1bmNhdGVkVGV4dCA9IHJlc3BvbnNlVGV4dC5zdWJzdHJpbmcoMCwgNTAwKTtcclxuICAgICAgICBcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOino+aekEFQSSBKU09O6Kej5p6Q5aSx6LSlIChIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7cGFyc2VFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcGFyc2VFcnJvci5tZXNzYWdlIDogJ+acquefpeino+aekOmUmeivryd9LiDlk43lupTniYfmrrU6ICR7dHJ1bmNhdGVkVGV4dH1gKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ+inhumikeino+aekOWksei0pScpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgei/lOWbnueahOaVsOaNrlxyXG4gICAgICBpZiAoIXJlc3VsdC5kYXRhKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEnov5Tlm57nmoTmlbDmja7kuLrnqbonKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyB7eyBBVVJBOiBNb2RpZnkgLSDnp7vpmaTmtYvor5VBUEnosIPnlKjvvIznm7TmjqXpqozor4HmlbDmja7lrozmlbTmgKcgfX1cclxuICAgICAgLy8g5a+55LqO6KeG6aKR57G75Z6L77yM5qOA5p+lVVJM5a2X5q61XHJcbiAgICAgIGlmIChyZXN1bHQuZGF0YS5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5WSURFTyAmJiAhcmVzdWx0LmRhdGEudXJsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfop4bpopHop6PmnpDmiJDlip/kvYbmnKrov5Tlm57mnInmlYjnmoTop4bpopFVUkwnKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDlr7nkuo7op4bpopHnsbvlnovvvIznoa7kv51VUkzlrZfmrrXmmK/mnInmlYjnmoTnvZHlnYBcclxuICAgICAgaWYgKHJlc3VsdC5kYXRhLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLlZJREVPICYmIHJlc3VsdC5kYXRhLnVybCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBuZXcgVVJMKHJlc3VsdC5kYXRhLnVybClcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg6L+U5Zue55qEVVJM5peg5pWIOiAke3Jlc3VsdC5kYXRhLnVybH1gKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5a+55LqO5Zu+6ZuG57G75Z6L77yM5qOA5p+l5Zu+54mH5pWw57uEXHJcbiAgICAgIGlmIChyZXN1bHQuZGF0YS5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5JTUFHRV9BTEJVTSkge1xyXG4gICAgICAgIGlmICghcmVzdWx0LmRhdGEuaW1hZ2VzIHx8IHJlc3VsdC5kYXRhLmltYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5Zu+6ZuG6Kej5p6Q5oiQ5Yqf5L2G5rKh5pyJ5om+5Yiw5Lu75L2V5Zu+54mHJylcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOWbvumbhuino+aekOaIkOWKn++8jOWMheWQqyAke3Jlc3VsdC5kYXRhLmltYWdlcy5sZW5ndGh9IOW8oOWbvueJh2ApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDop6PmnpDmiJDlip/vvIzojrflj5bliLAke3Jlc3VsdC5kYXRhLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLlZJREVPID8gJ+inhumikScgOiAn5Zu+6ZuGJ306ICR7cmVzdWx0LmRhdGEudGl0bGV9YClcclxuICAgICAgLy8ge3sgQVVSQTogTW9kaWZ5IC0g5L+u5aSN5Zu+6ZuG6Kej5p6Q5pe2dXJsLnN1YnN0cmluZ+mUmeivr++8jOa3u+WKoOexu+Wei+WIpOaWrSB9fVxyXG4gICAgICBpZiAocmVzdWx0LmRhdGEubWVkaWFUeXBlID09PSBNZWRpYVR5cGUuVklERU8gJiYgcmVzdWx0LmRhdGEudXJsICYmIHR5cGVvZiByZXN1bHQuZGF0YS51cmwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOinhumikVVSTDogJHtyZXN1bHQuZGF0YS51cmwuc3Vic3RyaW5nKDAsIDUwKX0uLi5gKVxyXG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5kYXRhLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLklNQUdFX0FMQlVNICYmIHJlc3VsdC5kYXRhLmltYWdlcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDlm77pm4bljIXlkKsgJHtyZXN1bHQuZGF0YS5pbWFnZXMubGVuZ3RofSDlvKDlm77niYdgKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcmVzdWx0LmRhdGFcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIOinhumikeino+aekOmUmeivrzonLCBlcnJvcilcclxuICAgICAgdGhyb3cgZXJyb3JcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOS4iuS8oOWqkuS9k+WIsFdlYkRBVlxyXG4gIHN0YXRpYyBhc3luYyB1cGxvYWRUb1dlYkRBVihcclxuICAgIG1lZGlhSW5mbzogUGFyc2VkVmlkZW9JbmZvLFxyXG4gICAgd2ViZGF2Q29uZmlnOiBXZWJEQVZDb25maWcsXHJcbiAgICBmb2xkZXJQYXRoPzogc3RyaW5nXHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IG1heFJldHJpZXMgPSA1OyAvLyDlop7liqDmnIDlpKfph43or5XmrKHmlbDliLA15qyhXHJcbiAgICBsZXQgYXR0ZW1wdCA9IDA7XHJcbiAgICBsZXQgbGFzdEVycm9yO1xyXG4gICAgXHJcbiAgICAvLyDmoLnmja7lqpLkvZPnsbvlnovnlJ/miJDmlofku7blkI1cclxuICAgIGxldCBmaWxlTmFtZSA9ICcnO1xyXG4gICAgaWYgKG1lZGlhSW5mby5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5WSURFTyAmJiBtZWRpYUluZm8udXJsKSB7XHJcbiAgICAgIC8vIOinhumikeaWh+S7tuWQjVxyXG4gICAgICBjb25zdCBmb3JtYXQgPSB0aGlzLmluZmVyVmlkZW9Gb3JtYXQobWVkaWFJbmZvLmZvcm1hdCwgbWVkaWFJbmZvLnVybCk7XHJcbiAgICAgIGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUZpbGVOYW1lKG1lZGlhSW5mby50aXRsZSwgZm9ybWF0KTtcclxuICAgIH0gZWxzZSBpZiAobWVkaWFJbmZvLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLklNQUdFX0FMQlVNICYmIG1lZGlhSW5mby5pbWFnZXMgJiYgbWVkaWFJbmZvLmltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIOWbvumbhuaWh+S7tuWkueWQjSAtIOS9v+eUqOino+aekOWQjueahOagh+mimOWQjeensFxyXG4gICAgICBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVGb2xkZXJOYW1lKG1lZGlhSW5mby50aXRsZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHdoaWxlIChhdHRlbXB0IDwgbWF4UmV0cmllcykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF0dGVtcHQrKztcclxuICAgICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0gV2ViREFW5LiK5Lyg5bCd6K+VICR7YXR0ZW1wdH0vJHttYXhSZXRyaWVzfTogJHttZWRpYUluZm8ubWVkaWFUeXBlID09PSBNZWRpYVR5cGUuVklERU8gPyAn6KeG6aKRJyA6ICflm77pm4YnfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvcHJveHkvd2ViZGF2Jywge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICB2aWRlb1VybDogbWVkaWFJbmZvLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLlZJREVPID8gbWVkaWFJbmZvLnVybCA6IHVuZGVmaW5lZCwgLy8g6KeG6aKRVVJMXHJcbiAgICAgICAgICAgIGltYWdlczogbWVkaWFJbmZvLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLklNQUdFX0FMQlVNID8gbWVkaWFJbmZvLmltYWdlcyA6IHVuZGVmaW5lZCwgLy8g5Zu+6ZuG5Zu+54mH5YiX6KGoXHJcbiAgICAgICAgICAgIHdlYmRhdkNvbmZpZyxcclxuICAgICAgICAgICAgZmlsZU5hbWUsIC8vIOaWh+S7tuWQjVxyXG4gICAgICAgICAgICBmb2xkZXJQYXRoOiBmb2xkZXJQYXRoIHx8ICcnXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyB7eyBBVVJBOiBNb2RpZnkgLSDmt7vliqDmm7TlvLrnmoRKU09O6Kej5p6Q6ZSZ6K+v5aSE55CGIH19XHJcbiAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOWOn+Wni+WTjeW6lOeKtuaAgTogJHtyZXNwb25zZS5zdGF0dXN9LCDlhoXlrrnplb/luqY6ICR7cmVzcG9uc2VUZXh0Lmxlbmd0aH1gKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKCFyZXNwb25zZVRleHQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg5pyN5Yqh5Zmo6L+U5Zue56m65ZON5bqUIChIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfSlgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIEpTT07op6PmnpDlpLHotKU6JywgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdb6L2s5a2YXSDlk43lupTnirbmgIE6JywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g5bCd6K+V6I635Y+W6YOo5YiG5ZON5bqU5YaF5a6555So5LqO6LCD6K+VXHJcbiAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ+aXoOazleiOt+WPluWTjeW6lOaWh+acrCcpO1xyXG4gICAgICAgICAgY29uc3QgdHJ1bmNhdGVkVGV4dCA9IHJlc3BvbnNlVGV4dC5zdWJzdHJpbmcoMCwgNTAwKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBKU09O6Kej5p6Q5aSx6LSlIChIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7cGFyc2VFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcGFyc2VFcnJvci5tZXNzYWdlIDogJ+acquefpeino+aekOmUmeivryd9LiDlk43lupTniYfmrrU6ICR7dHJ1bmNhdGVkVGV4dH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgLy8g5a+55LqONDAzLzQwMemUmeivr++8jOWcqOesrOS4gOasoeWwneivleaXtui/m+ihjOmHjeivlVxyXG4gICAgICAgICAgY29uc3Qgc2hvdWxkUmV0cnlJbW1lZGlhdGVseSA9XHJcbiAgICAgICAgICAgIChyZXN1bHQuZXJyb3I/LmluY2x1ZGVzKCc0MDMnKSB8fCByZXN1bHQuZXJyb3I/LmluY2x1ZGVzKCc0MDEnKSkgJiZcclxuICAgICAgICAgICAgYXR0ZW1wdCA9PT0gMTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoc2hvdWxkUmV0cnlJbW1lZGlhdGVseSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW+i9rOWtmF0g5p2D6ZmQ6ZSZ6K+v77yM56uL5Y2z6L+b6KGM6YeN6K+VJyk7XHJcbiAgICAgICAgICAgIC8vIOetieW+heS4gOWwj+auteaXtumXtOWQjueri+WNs+mHjeivlVxyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g5a+55LqONDA06ZSZ6K+v77yM5o+Q5L6b5pu05YW35L2T55qE6ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gcmVzdWx0LmVycm9yIHx8ICflqpLkvZPkuIrkvKDlpLHotKUnO1xyXG4gICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcj8uaW5jbHVkZXMoJzQwNCcpKSB7XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGDkuIrkvKDot6/lvoTkuI3lrZjlnKggKDQwNCnjgILor7fmo4Dmn6VXZWJEQVbmnI3liqHlmajlnLDlnYDlkozot6/lvoTphY3nva7mmK/lkKbmraPnoa7jgILplJnor6/or6bmg4U6ICR7cmVzdWx0LmVycm9yfWA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOS4iuS8oOaIkOWKn++8jOWwneivleasoeaVsDogJHthdHRlbXB0fWApO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuZmlsZVBhdGg7XHJcbiAgICAgICAgXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgbGFzdEVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgW+i9rOWtmF0g5LiK5Lyg5bCd6K+VICR7YXR0ZW1wdH0g5aSx6LSlOmAsIGVycm9yKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbpnIDopoHph43or5VcclxuICAgICAgICBjb25zdCBzaG91bGRSZXRyeSA9IHRoaXMuc2hvdWxkUmV0cnlVcGxvYWQoZXJyb3IsIGF0dGVtcHQpO1xyXG4gICAgICAgIGlmIChhdHRlbXB0IDwgbWF4UmV0cmllcyAmJiBzaG91bGRSZXRyeSkge1xyXG4gICAgICAgICAgLy8g5L2/55So5oyH5pWw6YCA6YG/562W55WlXHJcbiAgICAgICAgICBjb25zdCB3YWl0VGltZSA9IE1hdGgubWluKDEwMDAgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSksIDEwMDAwKTsgLy8g5pyA5aSn562J5b6FMTDnp5JcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDnrYnlvoUgJHt3YWl0VGltZS8xMDAwfSDnp5LlkI7ph43or5UuLi5gKTtcclxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB3YWl0VGltZSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBicmVhazsgLy8g5LiN5YaN6YeN6K+VXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOaJgOacieWwneivlemDveWksei0pVxyXG4gICAgY29uc29sZS5lcnJvcignW+i9rOWtmF0g5omA5pyJ5LiK5Lyg5bCd6K+V5Z2H5aSx6LSlJyk7XHJcbiAgICB0aHJvdyBsYXN0RXJyb3IgfHwgbmV3IEVycm9yKCfop4bpopHkuIrkvKDlpLHotKXvvIzlt7Lovr7liLDmnIDlpKfph43or5XmrKHmlbAnKTtcclxuICB9XHJcblxyXG4gIC8vIOWNleS4quinhumikei9rOWtmFxyXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0U2luZ2xlKFxyXG4gICAgdGFzazogQ29udmVyc2lvblRhc2ssXHJcbiAgICBwYXJzZXJDb25maWc6IFZpZGVvUGFyc2VyQ29uZmlnLFxyXG4gICAgd2ViZGF2Q29uZmlnOiBXZWJEQVZDb25maWcsXHJcbiAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBudW1iZXIsIHN0YXR1czogVGFza1N0YXR1cykgPT4gdm9pZFxyXG4gICk6IFByb21pc2U8Q29udmVyc2lvblRhc2s+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOabtOaWsOeKtuaAgeS4uuino+aekOS4rVxyXG4gICAgICB0YXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuUEFSU0lOR1xyXG4gICAgICBvblByb2dyZXNzPy4oMjAsIFRhc2tTdGF0dXMuUEFSU0lORylcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDlvIDlp4vop6PmnpDop4bpopE6ICR7dGFzay52aWRlb1VybH1gKVxyXG4gICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g5L2/55So6Kej5p6Q5ZmoOiAke3BhcnNlckNvbmZpZy5uYW1lfSAoJHtwYXJzZXJDb25maWcuYXBpVXJsfSlgKVxyXG5cclxuICAgICAgLy8g6Kej5p6Q6KeG6aKRXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8g5re75Yqg6KeG6aKRVVJM5qC85byP5qOA5p+lXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRVcmwodGFzay52aWRlb1VybCkpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6KeG6aKR6ZO+5o6l5qC85byP5peg5pWI77yM6K+356Gu5L+d5LulaHR0cDovL+aIlmh0dHBzOi8v5byA5aS0JylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8ge3sgQVVSQTogTW9kaWZ5IC0g56e76Zmk5aSH55So5rWL6K+V5qih5byP77yM55u05o6l5L2/55So5Li76Kej5p6Q57uT5p6cIH19XHJcbiAgICAgICAgbGV0IHBhcnNlZEluZm87XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHBhcnNlZEluZm8gPSBhd2FpdCB0aGlzLnBhcnNlVmlkZW8odGFzay52aWRlb1VybCwgcGFyc2VyQ29uZmlnKVxyXG4gICAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOino+aekOaIkOWKn++8jOWqkuS9k+exu+WeizogJHtwYXJzZWRJbmZvLm1lZGlhVHlwZX1gKVxyXG4gICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIOino+aekOWksei0pTonLCBwYXJzZUVycm9yKVxyXG4gICAgICAgICAgdGhyb3cgcGFyc2VFcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0YXNrLnBhcnNlZFZpZGVvSW5mbyA9IHBhcnNlZEluZm9cclxuICAgICAgICB0YXNrLnZpZGVvVGl0bGUgPSBwYXJzZWRJbmZvLnRpdGxlXHJcbiAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOino+aekOWujOaIkDogJHtwYXJzZWRJbmZvLnRpdGxlfWApXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignW+i9rOWtmF0g6KeG6aKR6Kej5p6Q5aSx6LSlOicsIGVycm9yKVxyXG4gICAgICAgIHRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5GQUlMRURcclxuICAgICAgICBsZXQgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfop4bpopHop6PmnpDlpLHotKUnXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5re75Yqg5pu05Y+L5aW955qE6ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgaWYgKGVycm9yTXNnLmluY2x1ZGVzKCdVUkzkuLrnqbonKSkge1xyXG4gICAgICAgICAgZXJyb3JNc2cgPSAnVVJM5Li656m6IC0g6Kej5p6QQVBJ5peg5rOV5o+Q5Y+W6KeG6aKRVVJM77yM6K+35bCd6K+V5YW25LuW6Kej5p6QQVBJ5oiW5qOA5p+l6ZO+5o6lJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0YXNrLmVycm9yID0gZXJyb3JNc2dcclxuICAgICAgICB0YXNrLmNvbXBsZXRlZEF0ID0gbmV3IERhdGUoKVxyXG4gICAgICAgIHJldHVybiB0YXNrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9uUHJvZ3Jlc3M/Lig1MCwgVGFza1N0YXR1cy5QQVJTSU5HKVxyXG4gICAgICBcclxuICAgICAgLy8g5pu05paw54q25oCB5Li65LiK5Lyg5LitXHJcbiAgICAgIHRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5VUExPQURJTkdcclxuICAgICAgb25Qcm9ncmVzcz8uKDYwLCBUYXNrU3RhdHVzLlVQTE9BRElORylcclxuXHJcbiAgICAgIC8vIOS4iuS8oOWqkuS9k1xyXG4gICAgICBjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMudXBsb2FkVG9XZWJEQVYoXHJcbiAgICAgICAgdGFzay5wYXJzZWRWaWRlb0luZm8hLCBcclxuICAgICAgICB3ZWJkYXZDb25maWdcclxuICAgICAgKVxyXG5cclxuICAgICAgLy8g5pu05paw5Lu75Yqh54q25oCBXHJcbiAgICAgIHRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5TVUNDRVNTXHJcbiAgICAgIHRhc2suY29tcGxldGVkQXQgPSBuZXcgRGF0ZSgpXHJcbiAgICAgIHRhc2sudXBsb2FkUmVzdWx0ID0ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZmlsZVBhdGhcclxuICAgICAgfVxyXG5cclxuICAgICAgb25Qcm9ncmVzcz8uKDEwMCwgVGFza1N0YXR1cy5TVUNDRVNTKVxyXG5cclxuLy8g5Lu75Yqh5a6M5oiQ5ZCO5omn6KGM5riF55CGXHJcbiAgICAgIGF3YWl0IENsZWFudXBTZXJ2aWNlLmNsZWFudXBBZnRlclRhc2tDb21wbGV0aW9uKHRhc2spO1xyXG4gICAgICByZXR1cm4gdGFza1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8g5pu05paw5Lu75Yqh5Li65aSx6LSl54q25oCBXHJcbiAgICAgIHRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5GQUlMRURcclxuICAgICAgdGFzay5jb21wbGV0ZWRBdCA9IG5ldyBEYXRlKClcclxuICAgICAgdGFzay5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+i9rOWtmOi/h+eoi+S4reWPkeeUn+acquefpemUmeivrydcclxuICAgICAgdGFzay51cGxvYWRSZXN1bHQgPSB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHRhc2suZXJyb3JcclxuICAgICAgfVxyXG5cclxuLy8g5Lu75Yqh5a6M5oiQ5ZCO5omn6KGM5riF55CGXHJcbiAgICAgIGF3YWl0IENsZWFudXBTZXJ2aWNlLmNsZWFudXBBZnRlclRhc2tDb21wbGV0aW9uKHRhc2spO1xyXG4gICAgICBvblByb2dyZXNzPy4oMCwgVGFza1N0YXR1cy5GQUlMRUQpXHJcblxyXG4gICAgICByZXR1cm4gdGFza1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5om56YeP6L2s5a2YXHJcbiAgc3RhdGljIGFzeW5jIGNvbnZlcnRCYXRjaChcclxuICAgIGJhdGNoVGFzazogQmF0Y2hUYXNrLFxyXG4gICAgb25Qcm9ncmVzcz86IChiYXRjaFByb2dyZXNzOiBudW1iZXIsIGN1cnJlbnRUYXNrPzogQ29udmVyc2lvblRhc2spID0+IHZvaWRcclxuICApOiBQcm9taXNlPEJhdGNoVGFzaz4ge1xyXG4gICAgYmF0Y2hUYXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuUEFSU0lOR1xyXG4gICAgXHJcbiAgICBjb25zdCB0b3RhbFRhc2tzID0gYmF0Y2hUYXNrLnRhc2tzLmxlbmd0aFxyXG4gICAgbGV0IGNvbXBsZXRlZFRhc2tzID0gMFxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0Y2hUYXNrLnRhc2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHRhc2sgPSBiYXRjaFRhc2sudGFza3NbaV1cclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8g5aSE55CG5Y2V5Liq5Lu75YqhXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFRhc2sgPSBhd2FpdCB0aGlzLmNvbnZlcnRTaW5nbGUoXHJcbiAgICAgICAgICB0YXNrLFxyXG4gICAgICAgICAgYmF0Y2hUYXNrLnBhcnNlckNvbmZpZyxcclxuICAgICAgICAgIGJhdGNoVGFzay53ZWJkYXZDb25maWcsXHJcbiAgICAgICAgICAocHJvZ3Jlc3MsIHN0YXR1cykgPT4ge1xyXG4gICAgICAgICAgICAvLyDorqHnrpfmgLvkvZPov5vluqZcclxuICAgICAgICAgICAgY29uc3QgdGFza1Byb2dyZXNzID0gKGNvbXBsZXRlZFRhc2tzICsgcHJvZ3Jlc3MgLyAxMDApIC8gdG90YWxUYXNrcyAqIDEwMFxyXG4gICAgICAgICAgICBvblByb2dyZXNzPy4odGFza1Byb2dyZXNzLCB0YXNrKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgYmF0Y2hUYXNrLnRhc2tzW2ldID0gdXBkYXRlZFRhc2tcclxuICAgICAgICBcclxuICAgICAgICBpZiAodXBkYXRlZFRhc2suc3RhdHVzID09PSBUYXNrU3RhdHVzLlNVQ0NFU1MpIHtcclxuICAgICAgICAgIGNvbXBsZXRlZFRhc2tzKytcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOaJuemHj+S7u+WKoeS4reeahOWNleS4quS7u+WKoeWksei0pTpgLCBlcnJvcilcclxuICAgICAgICAvLyDnu6fnu63lpITnkIbkuIvkuIDkuKrku7vliqFcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5pu05paw5om56YeP5Lu75Yqh54q25oCBXHJcbiAgICAgIGJhdGNoVGFzay5jb21wbGV0ZWRUYXNrcyA9IGNvbXBsZXRlZFRhc2tzXHJcbiAgICAgIFxyXG4gICAgICAvLyDorqHnrpfmgLvkvZPov5vluqZcclxuICAgICAgY29uc3Qgb3ZlcmFsbFByb2dyZXNzID0gKGkgKyAxKSAvIHRvdGFsVGFza3MgKiAxMDBcclxuICAgICAgb25Qcm9ncmVzcz8uKG92ZXJhbGxQcm9ncmVzcywgdGFzaylcclxuXHJcbiAgICAgIC8vIOa3u+WKoOW7tui/n+mBv+WFjeivt+axgui/h+S6jumikee5gVxyXG4gICAgICBpZiAoaSA8IGJhdGNoVGFzay50YXNrcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pu05paw5om56YeP5Lu75Yqh5pyA57uI54q25oCBXHJcbiAgICBiYXRjaFRhc2suY29tcGxldGVkQXQgPSBuZXcgRGF0ZSgpXHJcbiAgICBcclxuICAgIGlmIChjb21wbGV0ZWRUYXNrcyA9PT0gdG90YWxUYXNrcykge1xyXG4gICAgICBiYXRjaFRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5TVUNDRVNTXHJcbi8vIOaJuemHj+S7u+WKoeWujOaIkOWQjuaJp+ihjOa4heeQhlxyXG4gICAgICBhd2FpdCBDbGVhbnVwU2VydmljZS5jbGVhbnVwQWZ0ZXJUYXNrQ29tcGxldGlvbihiYXRjaFRhc2spO1xyXG4gICAgfSBlbHNlIGlmIChjb21wbGV0ZWRUYXNrcyA9PT0gMCkge1xyXG4gICAgICBiYXRjaFRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5GQUlMRURcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJhdGNoVGFzay5zdGF0dXMgPSBUYXNrU3RhdHVzLlNVQ0NFU1MgLy8g6YOo5YiG5oiQ5Yqf5Lmf5qCH6K6w5Li65oiQ5YqfXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJhdGNoVGFza1xyXG4gIH1cclxuXHJcbiAgLy8g55Sf5oiQ5paH5Lu25ZCNXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVGaWxlTmFtZSh0aXRsZTogc3RyaW5nLCBmb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyDmuIXnkIbmlofku7blkI3kuK3nmoTpnZ7ms5XlrZfnrKZcclxuICAgIGNvbnN0IGNsZWFuVGl0bGUgPSB0aXRsZVxyXG4gICAgICAucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXHgwMC1cXHgxRl0vZywgJ18nKSAgLy8g56e76Zmk6Z2e5rOV5a2X56ym5ZKM5o6n5Yi25a2X56ymXHJcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csICdfJykgICAgICAgICAgICAgICAgICAgLy8g5bCG56m65qC85pu/5o2i5Li65LiL5YiS57q/XHJcbiAgICAgIC5yZXBsYWNlKC9fKy9nLCAnXycpICAgICAgICAgICAgICAgICAgICAvLyDlsIblpJrkuKrkuIvliJLnur/lkIjlubbkuLrkuIDkuKpcclxuICAgICAgLnJlcGxhY2UoL15ffF8kL2csICcnKSAgICAgICAgICAgICAgICAgLy8g56e76Zmk5byA5aS05ZKM57uT5bC+55qE5LiL5YiS57q/XHJcbiAgICAgIC5zdWJzdHJpbmcoMCwgMTAwKSAgICAgICAgICAgICAgICAgICAgICAvLyDpmZDliLbplb/luqZcclxuICAgICAgLnRyaW0oKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOu+mZpOmmluWwvuepuuagvFxyXG5cclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJylcclxuICAgIHJldHVybiBgJHtjbGVhblRpdGxlfV8ke3RpbWVzdGFtcH0uJHtmb3JtYXR9YFxyXG4gIH1cclxuXHJcbiAgLy8g55Sf5oiQ5paH5Lu25aS55ZCN77yI55So5LqO5Zu+6ZuG77yJXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVGb2xkZXJOYW1lKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgLy8g5riF55CG5paH5Lu25aS55ZCN5Lit55qE6Z2e5rOV5a2X56ymXHJcbiAgICBjb25zdCBjbGVhblRpdGxlID0gdGl0bGVcclxuICAgICAgLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFx4MDAtXFx4MUZdL2csICdfJykgIC8vIOenu+mZpOmdnuazleWtl+espuWSjOaOp+WItuWtl+esplxyXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCAnXycpICAgICAgICAgICAgICAgICAgIC8vIOWwhuepuuagvOabv+aNouS4uuS4i+WIkue6v1xyXG4gICAgICAucmVwbGFjZSgvXysvZywgJ18nKSAgICAgICAgICAgICAgICAgICAgLy8g5bCG5aSa5Liq5LiL5YiS57q/5ZCI5bm25Li65LiA5LiqXHJcbiAgICAgIC5yZXBsYWNlKC9eX3xfJC9nLCAnJykgICAgICAgICAgICAgICAgIC8vIOenu+mZpOW8gOWktOWSjOe7k+WwvueahOS4i+WIkue6v1xyXG4gICAgICAuc3Vic3RyaW5nKDAsIDEwMCkgICAgICAgICAgICAgICAgICAgICAgLy8g6ZmQ5Yi26ZW/5bqmXHJcbiAgICAgIC50cmltKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDljrvpmaTpppblsL7nqbrmoLxcclxuXHJcbiAgICByZXR1cm4gY2xlYW5UaXRsZTtcclxuICB9XHJcblxyXG4gIC8vIOa1i+ivlVdlYkRBVui/nuaOpVxyXG4gIHN0YXRpYyBhc3luYyB0ZXN0V2ViREFWQ29ubmVjdGlvbih3ZWJkYXZDb25maWc6IFdlYkRBVkNvbmZpZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g56Gu5L+dVVJM57yW56CB5q2j56Gu77yM6YG/5YWN54m55q6K5a2X56ym6Zeu6aKYXHJcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICAgIHNlcnZlclVybDogZW5jb2RlVVJJQ29tcG9uZW50KHdlYmRhdkNvbmZpZy51cmwpLFxyXG4gICAgICAgIHVzZXJuYW1lOiBlbmNvZGVVUklDb21wb25lbnQod2ViZGF2Q29uZmlnLnVzZXJuYW1lKSxcclxuICAgICAgICBwYXNzd29yZDogZW5jb2RlVVJJQ29tcG9uZW50KHdlYmRhdkNvbmZpZy5wYXNzd29yZClcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbV2ViREFWXSDmtYvor5Xov57mjqU6ICR7d2ViZGF2Q29uZmlnLnVybH1gKVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL3Byb3h5L3dlYmRhdj8ke3BhcmFtcy50b1N0cmluZygpfWApXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcclxuICAgICAgICBtZXNzYWdlOiByZXN1bHQuc3VjY2VzcyA/ICfov57mjqXmtYvor5XmiJDlip8nIDogcmVzdWx0LmVycm9yIHx8ICfov57mjqXmtYvor5XlpLHotKUnXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tXZWJEQVZdIOi/nuaOpea1i+ivlemUmeivrzonLCBlcnJvcilcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfov57mjqXmtYvor5XlpLHotKUnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOeUn+aIkOS7u+WKoUlEXHJcbiAgc3RhdGljIGdlbmVyYXRlVGFza0lkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYHRhc2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXHJcbiAgfVxyXG5cclxuICAvLyDnlJ/miJDmibnph4/ku7vliqFJRFxyXG4gIHN0YXRpYyBnZW5lcmF0ZUJhdGNoSWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgYmF0Y2hfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXHJcbiAgfVxyXG5cclxuICAvLyDop6PmnpDop4bpopHpk77mjqXliJfooahcclxuICBzdGF0aWMgcGFyc2VWaWRlb1VybHModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKVxyXG4gICAgY29uc3QgdXJsczogc3RyaW5nW10gPSBbXVxyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpXHJcbiAgICAgIGlmICh0cmltbWVkKSB7XHJcbiAgICAgICAgLy8g5bCd6K+V5LuO5YyF5ZCr5YW25LuW5paH5a2X55qE6L6T5YWl5Lit5o+Q5Y+WVVJMXHJcbiAgICAgICAgY29uc3QgZXh0cmFjdGVkVXJsID0gdGhpcy5leHRyYWN0UmVhbFVybCh0cmltbWVkKVxyXG4gICAgICAgIGlmIChleHRyYWN0ZWRVcmwgJiYgdGhpcy5pc1ZhbGlkVXJsKGV4dHJhY3RlZFVybCkpIHtcclxuICAgICAgICAgIHVybHMucHVzaChleHRyYWN0ZWRVcmwpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB1cmxzXHJcbiAgfVxyXG5cclxuICAvLyDpqozor4FVUkzmoLzlvI9cclxuICBwcml2YXRlIHN0YXRpYyBpc1ZhbGlkVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDpppblhYjmj5Dlj5bmipbpn7PnrYnlubPlj7DnmoTnnJ/lrp7pk77mjqVcclxuICAgICAgY29uc3QgZXh0cmFjdGVkVXJsID0gdGhpcy5leHRyYWN0UmVhbFVybCh1cmwpXHJcbiAgICAgIG5ldyBVUkwoZXh0cmFjdGVkVXJsKVxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyDlpITnkIbnn63op4bpopHliIbkuqvmlofmnKzvvIzmj5Dlj5bnnJ/lrp5VUkxcclxuICBwcml2YXRlIHN0YXRpYyBleHRyYWN0UmVhbFVybChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIOWmguaenOW3sue7j+aYr+acieaViFVSTO+8jOebtOaOpei/lOWbnlxyXG4gICAgdHJ5IHtcclxuICAgICAgbmV3IFVSTChpbnB1dClcclxuICAgICAgcmV0dXJuIGlucHV0XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgLy8g5LiN5piv5pyJ5pWIVVJM77yM5bCd6K+V5o+Q5Y+WXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOWkhOeQhuaKlumfs+WIhuS6q+aWh+acrOagvOW8j1xyXG4gICAgLy8g5L6L5aaCOiBcIjcuOTcgRFVMOi8gMDIvMDUgekBULnlnIOS4jeefpemBk+WViuiiq+Wto+iOueiOueaKveS6huS5i+WQjuWwsei/meagt+S6hiMg5rC45Yqr5peg6Ze05omL5ri4ICMg5a2j6I656I65ICMg6IOh5qGDICMgY29zICMg54yO5aWHICBodHRwczovL3YuZG91eWluLmNvbS9kNjg5RXNPQWx1Zy8g5aSN5Yi25q2k6ZO+5o6l77yM5omT5byARG916Z+z5pCc57Si77yM55u05o6l6KeC55yL6KeG6aKR77yBXCJcclxuICAgIC8vIOaUuei/m+eahFVSTOato+WImeihqOi+vuW8j++8jOiDveWkn+abtOWlveWcsOWMuemFjeWQhOenjeWIhuS6q+aWh+acrOS4reeahFVSTFxyXG4gICAgY29uc3QgdXJsUmVnZXggPSAvKGh0dHBzPzpcXC9cXC8oPzp3d3dcXC4pP1stYS16QS1aMC05QDolLl9cXCt+Iz1dezEsMjU2fVxcLlthLXpBLVowLTkoKV17MSw2fVxcYig/OlstYS16QS1aMC05KClAOiVfXFwrLn4jPyY9XFwvPV0qKSkvZ1xyXG4gICAgY29uc3QgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHVybFJlZ2V4KVxyXG4gICAgXHJcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgLy8g6L+U5Zue56ys5LiA5Liq5Yy56YWN55qEVVJM5bm256e76Zmk5pyr5bC+5pac5p2gXHJcbiAgICAgIHJldHVybiBtYXRjaGVzWzBdLnJlcGxhY2UoL1xcLyQvLCAnJylcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGlucHV0XHJcbiAgfVxyXG5cclxuICAvLyDkvLDnrpfmlofku7blpKflsI/vvIjln7rkuo7ml7bplb/vvIlcclxuICBzdGF0aWMgZXN0aW1hdGVGaWxlU2l6ZShkdXJhdGlvbj86IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBpZiAoIWR1cmF0aW9uKSByZXR1cm4gMFxyXG4gICAgLy8g5YGH6K6+5bmz5Z2H56CB546H5Li6IDFNYnBzXHJcbiAgICByZXR1cm4gZHVyYXRpb24gKiAxMDI0ICogMTAyNCAvIDhcclxuICB9XHJcblxyXG4gIC8vIOagvOW8j+WMluaWh+S7tuWkp+Wwj1xyXG4gIHN0YXRpYyBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEInXHJcbiAgICBcclxuICAgIGNvbnN0IGsgPSAxMDI0XHJcbiAgICBjb25zdCBzaXplcyA9IFsnQicsICdLQicsICdNQicsICdHQicsICdUQiddXHJcbiAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSlcclxuICAgIFxyXG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV1cclxuICB9XHJcblxyXG4gIC8vIOagvOW8j+WMluaXtumVv1xyXG4gIHN0YXRpYyBmb3JtYXREdXJhdGlvbihzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKVxyXG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKVxyXG4gICAgY29uc3Qgc2VjcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAlIDYwKVxyXG4gICAgXHJcbiAgICBpZiAoaG91cnMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBgJHtob3Vyc306JHttaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gYCR7bWludXRlc306JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIHt7IEFVUkE6IEFkZCAtIOaZuuiDveinhumikeagvOW8j+aOqOaWreaWueazlSB9fVxyXG4gIHByaXZhdGUgc3RhdGljIGluZmVyVmlkZW9Gb3JtYXQocHJvdmlkZWRGb3JtYXQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgdmlkZW9Vcmw/OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgLy8g5pSv5oyB55qE6KeG6aKR5qC85byP5YiX6KGoXHJcbiAgICBjb25zdCB2YWxpZEZvcm1hdHMgPSBbXHJcbiAgICAgICdtcDQnLCAnYXZpJywgJ21vdicsICd3bXYnLCAnZmx2JywgJ3dlYm0nLCAnbWt2JywgJ200dicsXHJcbiAgICAgICczZ3AnLCAnZjR2JywgJ2FzZicsICdybScsICdybXZiJywgJ3ZvYicsICdvZ3YnLCAnbTJ0cycsICdtdHMnXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICAvLyDpqozor4Hmj5DkvpvnmoTmoLzlvI9cclxuICAgIGlmIChwcm92aWRlZEZvcm1hdCAmJiB2YWxpZEZvcm1hdHMuaW5jbHVkZXMocHJvdmlkZWRGb3JtYXQudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgcmV0dXJuIHByb3ZpZGVkRm9ybWF0LnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOS7jlVSTOaOqOaWrVxyXG4gICAgaWYgKHZpZGVvVXJsKSB7XHJcbiAgICAgIGNvbnN0IHVybEZvcm1hdCA9IHRoaXMuZXh0cmFjdEZvcm1hdEZyb21VcmwodmlkZW9VcmwpO1xyXG4gICAgICBpZiAodXJsRm9ybWF0ICYmIHZhbGlkRm9ybWF0cy5pbmNsdWRlcyh1cmxGb3JtYXQudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICByZXR1cm4gdXJsRm9ybWF0LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g6buY6K6kbXA0XHJcbiAgICByZXR1cm4gJ21wNCc7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIHt7IEFVUkE6IEFkZCAtIOS7jlVSTOaPkOWPluagvOW8j+aJqeWxleWQjSB9fVxyXG4gIHByaXZhdGUgc3RhdGljIGV4dHJhY3RGb3JtYXRGcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XHJcbiAgICAgIGNvbnN0IHBhdGhuYW1lID0gdXJsT2JqLnBhdGhuYW1lO1xyXG4gICAgICBjb25zdCBsYXN0RG90SW5kZXggPSBwYXRobmFtZS5sYXN0SW5kZXhPZignLicpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGxhc3REb3RJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBwYXRobmFtZS5zdWJzdHJpbmcobGFzdERvdEluZGV4ICsgMSk7XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIC8vIFVSTOino+aekOWksei0pe+8jOW/veeVpemUmeivr1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgXHJcbiAgLy8ge3sgQVVSQTogQWRkIC0g6aqM6K+B6KeG6aKR5qC85byP5piv5ZCm5pyJ5pWIIH19XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaXNWYWxpZFZpZGVvRm9ybWF0KGZvcm1hdDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB2YWxpZEZvcm1hdHMgPSBbXHJcbiAgICAgICdtcDQnLCAnYXZpJywgJ21vdicsICd3bXYnLCAnZmx2JywgJ3dlYm0nLCAnbWt2JywgJ200dicsXHJcbiAgICAgICczZ3AnLCAnZjR2JywgJ2FzZicsICdybScsICdybXZiJywgJ3ZvYicsICdvZ3YnLCAnbTJ0cycsICdtdHMnXHJcbiAgICBdO1xyXG4gICAgcmV0dXJuIHZhbGlkRm9ybWF0cy5pbmNsdWRlcyhmb3JtYXQudG9Mb3dlckNhc2UoKSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIHt7IEFVUkE6IEFkZCAtIOWIpOaWreaYr+WQpuW6lOivpemHjeivleS4iuS8oCB9fVxyXG4gIHByaXZhdGUgc3RhdGljIHNob3VsZFJldHJ5VXBsb2FkKGVycm9yOiBhbnksIGF0dGVtcHQ6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgLy8g5aaC5p6c5piv5pyA5ZCO5LiA5qyh5bCd6K+V77yM5LiN6YeN6K+VXHJcbiAgICBpZiAoYXR0ZW1wdCA+PSA1KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g5qOA5p+l6ZSZ6K+v57G75Z6LXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCBlcnJvci50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDlr7nkuo7nvZHnu5zplJnor6/lp4vnu4jph43or5VcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnbmV0d29yayBlcnJvcicpIHx8XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoIGZhaWxlZCcpIHx8XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2Vjb25ucmVzZXQnKSB8fFxyXG4gICAgICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5a+55LqO5pyN5Yqh5Zmo6ZSZ6K+vKDV4eCnlp4vnu4jph43or5VcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTAwJykgfHxcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTAyJykgfHxcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTAzJykgfHxcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTA0JykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5a+55LqO5p2D6ZmQ6ZSZ6K+vKDQwMy80MDEp5LuF5Zyo56ys5LiA5qyh5bCd6K+V5pe26YeN6K+VXHJcbiAgICAgIGlmICgoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCc0MDMnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJzQwMScpKSAmJiBhdHRlbXB0ID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g6buY6K6k5oOF5Ya15LiL77yM5a+55LqO5YmN5Yeg5qyh5bCd6K+V5YWB6K646YeN6K+VXHJcbiAgICByZXR1cm4gYXR0ZW1wdCA8IDM7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJUYXNrU3RhdHVzIiwiTWVkaWFUeXBlIiwiQ2xlYW51cFNlcnZpY2UiLCJDb252ZXJzaW9uU2VydmljZSIsInBhcnNlVmlkZW8iLCJ2aWRlb1VybCIsInBhcnNlckNvbmZpZyIsInRyaW0iLCJFcnJvciIsImFwaVVybCIsImV4dHJhY3RlZFVybCIsImV4dHJhY3RSZWFsVXJsIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXN1bHQiLCJyZXNwb25zZVRleHQiLCJ0ZXh0Iiwic3RhdHVzIiwibGVuZ3RoIiwicGFyc2UiLCJwYXJzZUVycm9yIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiY2F0Y2giLCJ0cnVuY2F0ZWRUZXh0IiwibWVzc2FnZSIsInN1Y2Nlc3MiLCJkYXRhIiwibWVkaWFUeXBlIiwiVklERU8iLCJ1cmwiLCJVUkwiLCJJTUFHRV9BTEJVTSIsImltYWdlcyIsInRpdGxlIiwidXBsb2FkVG9XZWJEQVYiLCJtZWRpYUluZm8iLCJ3ZWJkYXZDb25maWciLCJmb2xkZXJQYXRoIiwibWF4UmV0cmllcyIsImF0dGVtcHQiLCJsYXN0RXJyb3IiLCJmaWxlTmFtZSIsImZvcm1hdCIsImluZmVyVmlkZW9Gb3JtYXQiLCJnZW5lcmF0ZUZpbGVOYW1lIiwiZ2VuZXJhdGVGb2xkZXJOYW1lIiwidW5kZWZpbmVkIiwic2hvdWxkUmV0cnlJbW1lZGlhdGVseSIsImluY2x1ZGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZXJyb3JNZXNzYWdlIiwiZmlsZVBhdGgiLCJzaG91bGRSZXRyeSIsInNob3VsZFJldHJ5VXBsb2FkIiwid2FpdFRpbWUiLCJNYXRoIiwibWluIiwicG93IiwiY29udmVydFNpbmdsZSIsInRhc2siLCJvblByb2dyZXNzIiwiUEFSU0lORyIsIm5hbWUiLCJpc1ZhbGlkVXJsIiwicGFyc2VkSW5mbyIsInBhcnNlZFZpZGVvSW5mbyIsInZpZGVvVGl0bGUiLCJGQUlMRUQiLCJlcnJvck1zZyIsImNvbXBsZXRlZEF0IiwiRGF0ZSIsIlVQTE9BRElORyIsIlNVQ0NFU1MiLCJ1cGxvYWRSZXN1bHQiLCJjbGVhbnVwQWZ0ZXJUYXNrQ29tcGxldGlvbiIsImNvbnZlcnRCYXRjaCIsImJhdGNoVGFzayIsInRvdGFsVGFza3MiLCJ0YXNrcyIsImNvbXBsZXRlZFRhc2tzIiwiaSIsInVwZGF0ZWRUYXNrIiwicHJvZ3Jlc3MiLCJ0YXNrUHJvZ3Jlc3MiLCJvdmVyYWxsUHJvZ3Jlc3MiLCJjbGVhblRpdGxlIiwicmVwbGFjZSIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwidGVzdFdlYkRBVkNvbm5lY3Rpb24iLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZXJ2ZXJVcmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidG9TdHJpbmciLCJqc29uIiwiZ2VuZXJhdGVUYXNrSWQiLCJub3ciLCJyYW5kb20iLCJzdWJzdHIiLCJnZW5lcmF0ZUJhdGNoSWQiLCJwYXJzZVZpZGVvVXJscyIsImxpbmVzIiwic3BsaXQiLCJ1cmxzIiwibGluZSIsInRyaW1tZWQiLCJwdXNoIiwiaW5wdXQiLCJ1cmxSZWdleCIsIm1hdGNoZXMiLCJtYXRjaCIsImVzdGltYXRlRmlsZVNpemUiLCJkdXJhdGlvbiIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJrIiwic2l6ZXMiLCJmbG9vciIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwiZm9ybWF0RHVyYXRpb24iLCJzZWNvbmRzIiwiaG91cnMiLCJtaW51dGVzIiwic2VjcyIsInBhZFN0YXJ0IiwicHJvdmlkZWRGb3JtYXQiLCJ2YWxpZEZvcm1hdHMiLCJ0b0xvd2VyQ2FzZSIsInVybEZvcm1hdCIsImV4dHJhY3RGb3JtYXRGcm9tVXJsIiwidXJsT2JqIiwicGF0aG5hbWUiLCJsYXN0RG90SW5kZXgiLCJsYXN0SW5kZXhPZiIsImV4dGVuc2lvbiIsImUiLCJpc1ZhbGlkVmlkZW9Gb3JtYXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/conversion.ts\n"));

/***/ })

});