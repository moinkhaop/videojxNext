"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/convert/page",{

/***/ "(app-pages-browser)/./src/lib/conversion.ts":
/*!*******************************!*\
  !*** ./src/lib/conversion.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConversionService: () => (/* binding */ ConversionService)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/types */ \"(app-pages-browser)/./src/types/index.ts\");\n/* harmony import */ var _cleanup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cleanup */ \"(app-pages-browser)/./src/lib/cleanup.ts\");\n\n\nclass ConversionService {\n    // 解析视频链接\n    static async parseVideo(videoUrl, parserConfig) {\n        // 首先验证输入参数\n        if (!videoUrl || typeof videoUrl !== 'string' || !videoUrl.trim()) {\n            throw new Error('视频URL为空');\n        }\n        if (!parserConfig || !parserConfig.apiUrl) {\n            throw new Error('解析API配置无效');\n        }\n        try {\n            // 处理分享文本，提取真实URL\n            const extractedUrl = this.extractRealUrl(videoUrl);\n            console.log(\"[转存] 提取到URL: \".concat(extractedUrl));\n            console.log(\"[转存] 发送解析请求，URL: \".concat(extractedUrl.substring(0, 50), \"...\"));\n            const response = await fetch('/api/proxy/parser', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    videoUrl: extractedUrl,\n                    parserConfig\n                })\n            });\n            // {{ AURA: Modify - 添加解析API的JSON错误处理 }}\n            let result;\n            try {\n                const responseText = await response.text();\n                console.log(\"[转存] 解析API响应状态: \".concat(response.status, \", 内容长度: \").concat(responseText.length));\n                if (!responseText.trim()) {\n                    throw new Error(\"解析服务器返回空响应 (HTTP \".concat(response.status, \")\"));\n                }\n                result = JSON.parse(responseText);\n            } catch (parseError) {\n                console.error('[转存] 解析API JSON解析失败:', parseError);\n                console.error('[转存] 解析API响应状态:', response.status, response.statusText);\n                // 尝试获取部分响应内容用于调试\n                const responseText = await response.text().catch(()=>'无法获取响应文本');\n                const truncatedText = responseText.substring(0, 500);\n                throw new Error(\"解析API JSON解析失败 (HTTP \".concat(response.status, \"): \").concat(parseError instanceof Error ? parseError.message : '未知解析错误', \". 响应片段: \").concat(truncatedText));\n            }\n            if (!result.success) {\n                throw new Error(result.error || '视频解析失败');\n            }\n            // 验证返回的数据\n            if (!result.data) {\n                throw new Error('API返回的数据为空');\n            }\n            // {{ AURA: Modify - 移除测试API调用，直接验证数据完整性 }}\n            // 对于视频类型，检查URL字段\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && !result.data.url) {\n                throw new Error('视频解析成功但未返回有效的视频URL');\n            }\n            // 对于视频类型，确保URL字段是有效的网址\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && result.data.url) {\n                try {\n                    new URL(result.data.url);\n                } catch (e) {\n                    throw new Error(\"返回的URL无效: \".concat(result.data.url));\n                }\n            }\n            // 对于图集类型，检查图片数组\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM) {\n                if (!result.data.images || result.data.images.length === 0) {\n                    throw new Error('图集解析成功但没有找到任何图片');\n                }\n                console.log(\"[转存] 图集解析成功，包含 \".concat(result.data.images.length, \" 张图片\"));\n            }\n            console.log(\"[转存] 解析成功，获取到\".concat(result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO ? '视频' : '图集', \": \").concat(result.data.title));\n            // {{ AURA: Modify - 修复图集解析时url.substring错误，添加类型判断 }}\n            if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && result.data.url && typeof result.data.url === 'string') {\n                console.log(\"[转存] 视频URL: \".concat(result.data.url.substring(0, 50), \"...\"));\n            } else if (result.data.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM && result.data.images) {\n                console.log(\"[转存] 图集包含 \".concat(result.data.images.length, \" 张图片\"));\n            }\n            return result.data;\n        } catch (error) {\n            console.error('[转存] 视频解析错误:', error);\n            throw error;\n        }\n    }\n    // 上传媒体到WebDAV\n    static async uploadToWebDAV(mediaInfo, webdavConfig, folderPath) {\n        const maxRetries = 5; // 增加最大重试次数到5次\n        let attempt = 0;\n        let lastError;\n        // 根据媒体类型生成文件名\n        let fileName = '';\n        if (mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO && mediaInfo.url) {\n            // 视频文件名\n            const format = this.inferVideoFormat(mediaInfo.format, mediaInfo.url);\n            fileName = this.generateFileName(mediaInfo.title, format);\n        } else if (mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM && mediaInfo.images && mediaInfo.images.length > 0) {\n            // 图集文件夹名 - 使用解析后的标题名称\n            fileName = this.generateFolderName(mediaInfo.title);\n        }\n        while(attempt < maxRetries){\n            try {\n                attempt++;\n                console.log(\"[转存] WebDAV上传尝试 \".concat(attempt, \"/\").concat(maxRetries, \": \").concat(mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO ? '视频' : '图集'));\n                const response = await fetch('/api/proxy/webdav', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        videoUrl: mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.VIDEO ? mediaInfo.url : undefined,\n                        images: mediaInfo.mediaType === _types__WEBPACK_IMPORTED_MODULE_0__.MediaType.IMAGE_ALBUM ? mediaInfo.images : undefined,\n                        webdavConfig,\n                        fileName,\n                        folderPath: folderPath || ''\n                    })\n                });\n                // {{ AURA: Modify - 添加更强的JSON解析错误处理 }}\n                let result;\n                try {\n                    const responseText = await response.text();\n                    console.log(\"[转存] 原始响应状态: \".concat(response.status, \", 内容长度: \").concat(responseText.length));\n                    if (!responseText.trim()) {\n                        throw new Error(\"服务器返回空响应 (HTTP \".concat(response.status, \")\"));\n                    }\n                    result = JSON.parse(responseText);\n                } catch (parseError) {\n                    console.error('[转存] JSON解析失败:', parseError);\n                    console.error('[转存] 响应状态:', response.status, response.statusText);\n                    // 尝试获取部分响应内容用于调试\n                    const responseText = await response.text().catch(()=>'无法获取响应文本');\n                    const truncatedText = responseText.substring(0, 500);\n                    throw new Error(\"JSON解析失败 (HTTP \".concat(response.status, \"): \").concat(parseError instanceof Error ? parseError.message : '未知解析错误', \". 响应片段: \").concat(truncatedText));\n                }\n                if (!result.success) {\n                    var _result_error, _result_error1, _result_error2;\n                    // 对于403/401错误，在第一次尝试时进行重试\n                    const shouldRetryImmediately = (((_result_error = result.error) === null || _result_error === void 0 ? void 0 : _result_error.includes('403')) || ((_result_error1 = result.error) === null || _result_error1 === void 0 ? void 0 : _result_error1.includes('401'))) && attempt === 1;\n                    if (shouldRetryImmediately) {\n                        console.log('[转存] 权限错误，立即进行重试');\n                        // 等待一小段时间后立即重试\n                        await new Promise((resolve)=>setTimeout(resolve, 1000));\n                        continue;\n                    }\n                    // 对于404错误，提供更具体的错误信息\n                    let errorMessage = result.error || '媒体上传失败';\n                    if ((_result_error2 = result.error) === null || _result_error2 === void 0 ? void 0 : _result_error2.includes('404')) {\n                        errorMessage = \"上传路径不存在 (404)。请检查WebDAV服务器地址和路径配置是否正确。错误详情: \".concat(result.error);\n                    }\n                    throw new Error(errorMessage);\n                }\n                console.log(\"[转存] 上传成功，尝试次数: \".concat(attempt));\n                return result.filePath;\n            } catch (error) {\n                lastError = error;\n                console.error(\"[转存] 上传尝试 \".concat(attempt, \" 失败:\"), error);\n                // 检查是否需要重试\n                const shouldRetry = this.shouldRetryUpload(error, attempt);\n                if (attempt < maxRetries && shouldRetry) {\n                    // 使用指数退避策略\n                    const waitTime = Math.min(1000 * Math.pow(2, attempt - 1), 10000); // 最大等待10秒\n                    console.log(\"[转存] 等待 \".concat(waitTime / 1000, \" 秒后重试...\"));\n                    await new Promise((resolve)=>setTimeout(resolve, waitTime));\n                } else {\n                    break; // 不再重试\n                }\n            }\n        }\n        // 所有尝试都失败\n        console.error('[转存] 所有上传尝试均失败');\n        throw lastError || new Error('视频上传失败，已达到最大重试次数');\n    }\n    // 单个视频转存\n    static async convertSingle(task, parserConfig, webdavConfig, onProgress) {\n        try {\n            // 更新状态为解析中\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING;\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(20, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING);\n            console.log(\"[转存] 开始解析视频: \".concat(task.videoUrl));\n            console.log(\"[转存] 使用解析器: \".concat(parserConfig.name, \" (\").concat(parserConfig.apiUrl, \")\"));\n            // 解析视频\n            try {\n                // 添加视频URL格式检查\n                if (!this.isValidUrl(task.videoUrl)) {\n                    throw new Error('视频链接格式无效，请确保以http://或https://开头');\n                }\n                // {{ AURA: Modify - 移除备用测试模式，直接使用主解析结果 }}\n                let parsedInfo;\n                try {\n                    parsedInfo = await this.parseVideo(task.videoUrl, parserConfig);\n                    console.log(\"[转存] 解析成功，媒体类型: \".concat(parsedInfo.mediaType));\n                } catch (parseError) {\n                    console.error('[转存] 解析失败:', parseError);\n                    throw parseError;\n                }\n                task.parsedVideoInfo = parsedInfo;\n                task.videoTitle = parsedInfo.title;\n                console.log(\"[转存] 解析完成: \".concat(parsedInfo.title));\n            } catch (error) {\n                console.error('[转存] 视频解析失败:', error);\n                task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED;\n                let errorMsg = error instanceof Error ? error.message : '视频解析失败';\n                // 添加更友好的错误信息\n                if (errorMsg.includes('URL为空')) {\n                    errorMsg = 'URL为空 - 解析API无法提取视频URL，请尝试其他解析API或检查链接';\n                }\n                task.error = errorMsg;\n                task.completedAt = new Date();\n                return task;\n            }\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(50, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING);\n            // 更新状态为上传中\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.UPLOADING;\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(60, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.UPLOADING);\n            // 上传媒体\n            const filePath = await this.uploadToWebDAV(task.parsedVideoInfo, webdavConfig);\n            // 更新任务状态\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS;\n            task.completedAt = new Date();\n            task.uploadResult = {\n                success: true,\n                filePath\n            };\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(100, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS);\n            // 任务完成后执行清理\n            await _cleanup__WEBPACK_IMPORTED_MODULE_1__.CleanupService.cleanupAfterTaskCompletion(task);\n            return task;\n        } catch (error) {\n            // 更新任务为失败状态\n            task.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED;\n            task.completedAt = new Date();\n            task.error = error instanceof Error ? error.message : '转存过程中发生未知错误';\n            task.uploadResult = {\n                success: false,\n                error: task.error\n            };\n            // 任务完成后执行清理\n            await _cleanup__WEBPACK_IMPORTED_MODULE_1__.CleanupService.cleanupAfterTaskCompletion(task);\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(0, _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED);\n            return task;\n        }\n    }\n    // 批量转存\n    static async convertBatch(batchTask, onProgress) {\n        batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.PARSING;\n        const totalTasks = batchTask.tasks.length;\n        let completedTasks = 0;\n        for(let i = 0; i < batchTask.tasks.length; i++){\n            const task = batchTask.tasks[i];\n            try {\n                // 处理单个任务\n                const updatedTask = await this.convertSingle(task, batchTask.parserConfig, batchTask.webdavConfig, (progress, status)=>{\n                    // 计算总体进度\n                    const taskProgress = (completedTasks + progress / 100) / totalTasks * 100;\n                    onProgress === null || onProgress === void 0 ? void 0 : onProgress(taskProgress, task);\n                });\n                batchTask.tasks[i] = updatedTask;\n                if (updatedTask.status === _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS) {\n                    completedTasks++;\n                }\n            } catch (error) {\n                console.error(\"批量任务中的单个任务失败:\", error);\n            // 继续处理下一个任务\n            }\n            // 更新批量任务状态\n            batchTask.completedTasks = completedTasks;\n            // 计算总体进度\n            const overallProgress = (i + 1) / totalTasks * 100;\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress(overallProgress, task);\n            // 添加延迟避免请求过于频繁\n            if (i < batchTask.tasks.length - 1) {\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n            }\n        }\n        // 更新批量任务最终状态\n        batchTask.completedAt = new Date();\n        if (completedTasks === totalTasks) {\n            batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS;\n            // 批量任务完成后执行清理\n            await _cleanup__WEBPACK_IMPORTED_MODULE_1__.CleanupService.cleanupAfterTaskCompletion(batchTask);\n        } else if (completedTasks === 0) {\n            batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.FAILED;\n        } else {\n            batchTask.status = _types__WEBPACK_IMPORTED_MODULE_0__.TaskStatus.SUCCESS; // 部分成功也标记为成功\n        }\n        return batchTask;\n    }\n    // 生成文件名\n    static generateFileName(title, format) {\n        // 清理文件名中的非法字符\n        const cleanTitle = title.replace(/[<>:\"/\\\\|?*\\x00-\\x1F]/g, '_') // 移除非法字符和控制字符\n        .replace(/\\s+/g, '_') // 将空格替换为下划线\n        .replace(/_+/g, '_') // 将多个下划线合并为一个\n        .replace(/^_|_$/g, '') // 移除开头和结尾的下划线\n        .substring(0, 100) // 限制长度\n        .trim() // 去除首尾空格\n        ;\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n        return \"\".concat(cleanTitle, \"_\").concat(timestamp, \".\").concat(format);\n    }\n    // 生成文件夹名（用于图集）\n    static generateFolderName(title) {\n        // 清理文件夹名中的非法字符\n        const cleanTitle = title.replace(/[<>:\"/\\\\|?*\\x00-\\x1F]/g, '_') // 移除非法字符和控制字符\n        .replace(/\\s+/g, '_') // 将空格替换为下划线\n        .replace(/_+/g, '_') // 将多个下划线合并为一个\n        .replace(/^_|_$/g, '') // 移除开头和结尾的下划线\n        .substring(0, 100) // 限制长度\n        .trim() // 去除首尾空格\n        ;\n        return cleanTitle;\n    }\n    // 测试WebDAV连接\n    static async testWebDAVConnection(webdavConfig) {\n        try {\n            // 确保URL编码正确，避免特殊字符问题\n            const params = new URLSearchParams({\n                serverUrl: encodeURIComponent(webdavConfig.url),\n                username: encodeURIComponent(webdavConfig.username),\n                password: encodeURIComponent(webdavConfig.password)\n            });\n            console.log(\"[WebDAV] 测试连接: \".concat(webdavConfig.url));\n            const response = await fetch(\"/api/proxy/webdav?\".concat(params.toString()));\n            const result = await response.json();\n            return {\n                success: result.success,\n                message: result.success ? '连接测试成功' : result.error || '连接测试失败'\n            };\n        } catch (error) {\n            console.error('[WebDAV] 连接测试错误:', error);\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : '连接测试失败'\n            };\n        }\n    }\n    // 生成任务ID\n    static generateTaskId() {\n        return \"task_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n    }\n    // 生成批量任务ID\n    static generateBatchId() {\n        return \"batch_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n    }\n    // 解析视频链接列表\n    static parseVideoUrls(text) {\n        const lines = text.split('\\n');\n        const urls = [];\n        for (const line of lines){\n            const trimmed = line.trim();\n            if (trimmed) {\n                // 尝试从包含其他文字的输入中提取URL\n                const extractedUrl = this.extractRealUrl(trimmed);\n                if (extractedUrl && this.isValidUrl(extractedUrl)) {\n                    urls.push(extractedUrl);\n                }\n            }\n        }\n        return urls;\n    }\n    // 验证URL格式\n    static isValidUrl(url) {\n        try {\n            // 首先提取抖音等平台的真实链接\n            const extractedUrl = this.extractRealUrl(url);\n            new URL(extractedUrl);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    // 处理短视频分享文本，提取真实URL\n    static extractRealUrl(input) {\n        // 如果已经是有效URL，直接返回\n        try {\n            new URL(input);\n            return input;\n        } catch (e) {\n        // 不是有效URL，尝试提取\n        }\n        // 处理抖音分享文本格式\n        // 例如: \"7.97 DUL:/ 02/05 z@T.yg 不知道啊被季莹莹抽了之后就这样了# 永劫无间手游 # 季莹莹 # 胡桃 # cos # 猎奇  https://v.douyin.com/d689EsOAlug/ 复制此链接，打开Dou音搜索，直接观看视频！\"\n        // 改进的URL正则表达式，能够更好地匹配各种分享文本中的URL\n        const urlRegex = /(https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&=\\/=]*))/g;\n        const matches = input.match(urlRegex);\n        if (matches && matches.length > 0) {\n            // 返回第一个匹配的URL并移除末尾斜杠\n            return matches[0].replace(/\\/$/, '');\n        }\n        return input;\n    }\n    // 估算文件大小（基于时长）\n    static estimateFileSize(duration) {\n        if (!duration) return 0;\n        // 假设平均码率为 1Mbps\n        return duration * 1024 * 1024 / 8;\n    }\n    // 格式化文件大小\n    static formatFileSize(bytes) {\n        if (bytes === 0) return '0 B';\n        const k = 1024;\n        const sizes = [\n            'B',\n            'KB',\n            'MB',\n            'GB',\n            'TB'\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n    // 格式化时长\n    static formatDuration(seconds) {\n        const hours = Math.floor(seconds / 3600);\n        const minutes = Math.floor(seconds % 3600 / 60);\n        const secs = Math.floor(seconds % 60);\n        if (hours > 0) {\n            return \"\".concat(hours, \":\").concat(minutes.toString().padStart(2, '0'), \":\").concat(secs.toString().padStart(2, '0'));\n        } else {\n            return \"\".concat(minutes, \":\").concat(secs.toString().padStart(2, '0'));\n        }\n    }\n    // {{ AURA: Add - 智能视频格式推断方法 }}\n    static inferVideoFormat(providedFormat, videoUrl) {\n        // 支持的视频格式列表\n        const validFormats = [\n            'mp4',\n            'avi',\n            'mov',\n            'wmv',\n            'flv',\n            'webm',\n            'mkv',\n            'm4v',\n            '3gp',\n            'f4v',\n            'asf',\n            'rm',\n            'rmvb',\n            'vob',\n            'ogv',\n            'm2ts',\n            'mts'\n        ];\n        // 验证提供的格式\n        if (providedFormat && validFormats.includes(providedFormat.toLowerCase())) {\n            return providedFormat.toLowerCase();\n        }\n        // 从URL推断\n        if (videoUrl) {\n            const urlFormat = this.extractFormatFromUrl(videoUrl);\n            if (urlFormat && validFormats.includes(urlFormat.toLowerCase())) {\n                return urlFormat.toLowerCase();\n            }\n        }\n        // 默认mp4\n        return 'mp4';\n    }\n    // {{ AURA: Add - 从URL提取格式扩展名 }}\n    static extractFormatFromUrl(url) {\n        try {\n            const urlObj = new URL(url);\n            const pathname = urlObj.pathname;\n            const lastDotIndex = pathname.lastIndexOf('.');\n            if (lastDotIndex !== -1) {\n                const extension = pathname.substring(lastDotIndex + 1);\n                return extension.toLowerCase();\n            }\n        } catch (e) {\n        // URL解析失败，忽略错误\n        }\n        return null;\n    }\n    // {{ AURA: Add - 验证视频格式是否有效 }}\n    static isValidVideoFormat(format) {\n        const validFormats = [\n            'mp4',\n            'avi',\n            'mov',\n            'wmv',\n            'flv',\n            'webm',\n            'mkv',\n            'm4v',\n            '3gp',\n            'f4v',\n            'asf',\n            'rm',\n            'rmvb',\n            'vob',\n            'ogv',\n            'm2ts',\n            'mts'\n        ];\n        return validFormats.includes(format.toLowerCase());\n    }\n    // {{ AURA: Add - 判断是否应该重试上传 }}\n    static shouldRetryUpload(error, attempt) {\n        // 如果是最后一次尝试，不重试\n        if (attempt >= 5) {\n            return false;\n        }\n        // 检查错误类型\n        if (error) {\n            const errorMessage = (error.message || error.toString()).toLowerCase();\n            // 对于网络错误始终重试\n            if (errorMessage.includes('network error') || errorMessage.includes('fetch failed') || errorMessage.includes('econnreset') || errorMessage.includes('timeout')) {\n                return true;\n            }\n            // 对于服务器错误(5xx)始终重试\n            if (errorMessage.includes('500') || errorMessage.includes('502') || errorMessage.includes('503') || errorMessage.includes('504')) {\n                return true;\n            }\n            // 对于权限错误(403/401)仅在第一次尝试时重试\n            if ((errorMessage.includes('403') || errorMessage.includes('401')) && attempt === 1) {\n                return true;\n            }\n        }\n        // 默认情况下，对于前几次尝试允许重试\n        return attempt < 3;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY29udmVyc2lvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEg7QUFDbEY7QUFNbkMsTUFBTUc7SUFDWCxTQUFTO0lBQ1QsYUFBYUMsV0FBV0MsUUFBZ0IsRUFBRUMsWUFBK0IsRUFBNEI7UUFDbkcsV0FBVztRQUNYLElBQUksQ0FBQ0QsWUFBWSxPQUFPQSxhQUFhLFlBQVksQ0FBQ0EsU0FBU0UsSUFBSSxJQUFJO1lBQ2pFLE1BQU0sSUFBSUMsTUFBTTtRQUNsQjtRQUVBLElBQUksQ0FBQ0YsZ0JBQWdCLENBQUNBLGFBQWFHLE1BQU0sRUFBRTtZQUN6QyxNQUFNLElBQUlELE1BQU07UUFDbEI7UUFFQSxJQUFJO1lBQ0YsaUJBQWlCO1lBQ2pCLE1BQU1FLGVBQWUsSUFBSSxDQUFDQyxjQUFjLENBQUNOO1lBQ3pDTyxRQUFRQyxHQUFHLENBQUMsZ0JBQTZCLE9BQWJIO1lBQzVCRSxRQUFRQyxHQUFHLENBQUMsb0JBQWtELE9BQTlCSCxhQUFhSSxTQUFTLENBQUMsR0FBRyxLQUFJO1lBRTlELE1BQU1DLFdBQVcsTUFBTUMsTUFBTSxxQkFBcUI7Z0JBQ2hEQyxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7Z0JBQ0FDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztvQkFDbkJoQixVQUFVSztvQkFDVko7Z0JBQ0Y7WUFDRjtZQUVBLHdDQUF3QztZQUN4QyxJQUFJZ0I7WUFDSixJQUFJO2dCQUNGLE1BQU1DLGVBQWUsTUFBTVIsU0FBU1MsSUFBSTtnQkFDeENaLFFBQVFDLEdBQUcsQ0FBQyxtQkFBNkNVLE9BQTFCUixTQUFTVSxNQUFNLEVBQUMsWUFBOEIsT0FBcEJGLGFBQWFHLE1BQU07Z0JBRTVFLElBQUksQ0FBQ0gsYUFBYWhCLElBQUksSUFBSTtvQkFDeEIsTUFBTSxJQUFJQyxNQUFNLG9CQUFvQyxPQUFoQk8sU0FBU1UsTUFBTSxFQUFDO2dCQUN0RDtnQkFFQUgsU0FBU0YsS0FBS08sS0FBSyxD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QjtJQUMvQixPQUFlQyxtQkFBbUJwRyxNQUFjLEVBQVc7UUFDekQsTUFBTTBGLGVBQWU7WUFDbkI7WUFBTztZQUFPO1lBQU87WUFBTztZQUFPO1lBQVE7WUFBTztZQUNsRDtZQUFPO1lBQU87WUFBTztZQUFNO1lBQVE7WUFBTztZQUFPO1lBQVE7U0FDMUQ7UUFDRCxPQUFPQSxhQUFhcEYsUUFBUSxDQUFDTixPQUFPMkYsV0FBVztJQUNqRDtJQUVBLCtCQUErQjtJQUMvQixPQUFlOUUsa0JBQWtCbkMsS0FBVSxFQUFFbUIsT0FBZSxFQUFXO1FBQ3JFLGdCQUFnQjtRQUNoQixJQUFJQSxXQUFXLEdBQUc7WUFDaEIsT0FBTztRQUNUO1FBRUEsU0FBUztRQUNULElBQUluQixPQUFPO1lBQ1QsTUFBTWdDLGVBQWUsQ0FBQ2hDLE1BQU1JLE9BQU8sSUFBSUosTUFBTThFLFFBQVEsRUFBQyxFQUFHbUMsV0FBVztZQUVwRSxhQUFhO1lBQ2IsSUFBSWpGLGFBQWFKLFFBQVEsQ0FBQyxvQkFDdEJJLGFBQWFKLFFBQVEsQ0FBQyxtQkFDdEJJLGFBQWFKLFFBQVEsQ0FBQyxpQkFDdEJJLGFBQWFKLFFBQVEsQ0FBQyxZQUFZO2dCQUNwQyxPQUFPO1lBQ1Q7WUFFQSxtQkFBbUI7WUFDbkIsSUFBSUksYUFBYUosUUFBUSxDQUFDLFVBQ3RCSSxhQUFhSixRQUFRLENBQUMsVUFDdEJJLGFBQWFKLFFBQVEsQ0FBQyxVQUN0QkksYUFBYUosUUFBUSxDQUFDLFFBQVE7Z0JBQ2hDLE9BQU87WUFDVDtZQUVBLDRCQUE0QjtZQUM1QixJQUFJLENBQUNJLGFBQWFKLFFBQVEsQ0FBQyxVQUFVSSxhQUFhSixRQUFRLENBQUMsTUFBSyxLQUFNVCxZQUFZLEdBQUc7Z0JBQ25GLE9BQU87WUFDVDtRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCLE9BQU9BLFVBQVU7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsiRDpcXEdpdEh1YlxcZHlqeG5leHRcXGR5anhcXHNyY1xcbGliXFxjb252ZXJzaW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnZlcnNpb25UYXNrLCBCYXRjaFRhc2ssIFRhc2tTdGF0dXMsIFZpZGVvUGFyc2VyQ29uZmlnLCBXZWJEQVZDb25maWcsIFBhcnNlZFZpZGVvSW5mbywgTWVkaWFUeXBlIH0gZnJvbSAnQC90eXBlcydcclxuaW1wb3J0IHsgQ2xlYW51cFNlcnZpY2UgfSBmcm9tICcuL2NsZWFudXAnXHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnZlcnNpb25TZXJ2aWNlIHtcclxuICAvLyDop6PmnpDop4bpopHpk77mjqVcclxuICBzdGF0aWMgYXN5bmMgcGFyc2VWaWRlbyh2aWRlb1VybDogc3RyaW5nLCBwYXJzZXJDb25maWc6IFZpZGVvUGFyc2VyQ29uZmlnKTogUHJvbWlzZTxQYXJzZWRWaWRlb0luZm8+IHtcclxuICAgIC8vIOmmluWFiOmqjOivgei+k+WFpeWPguaVsFxyXG4gICAgaWYgKCF2aWRlb1VybCB8fCB0eXBlb2YgdmlkZW9VcmwgIT09ICdzdHJpbmcnIHx8ICF2aWRlb1VybC50cmltKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfop4bpopFVUkzkuLrnqbonKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIXBhcnNlckNvbmZpZyB8fCAhcGFyc2VyQ29uZmlnLmFwaVVybCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ino+aekEFQSemFjee9ruaXoOaViCcpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOWkhOeQhuWIhuS6q+aWh+acrO+8jOaPkOWPluecn+WunlVSTFxyXG4gICAgICBjb25zdCBleHRyYWN0ZWRVcmwgPSB0aGlzLmV4dHJhY3RSZWFsVXJsKHZpZGVvVXJsKVxyXG4gICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g5o+Q5Y+W5YiwVVJMOiAke2V4dHJhY3RlZFVybH1gKVxyXG4gICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g5Y+R6YCB6Kej5p6Q6K+35rGC77yMVVJMOiAke2V4dHJhY3RlZFVybC5zdWJzdHJpbmcoMCwgNTApfS4uLmApXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Byb3h5L3BhcnNlcicsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgdmlkZW9Vcmw6IGV4dHJhY3RlZFVybCwgLy8g5L2/55So5o+Q5Y+W5ZCO55qEVVJMXHJcbiAgICAgICAgICBwYXJzZXJDb25maWdcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8ge3sgQVVSQTogTW9kaWZ5IC0g5re75Yqg6Kej5p6QQVBJ55qESlNPTumUmeivr+WkhOeQhiB9fVxyXG4gICAgICBsZXQgcmVzdWx0O1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g6Kej5p6QQVBJ5ZON5bqU54q25oCBOiAke3Jlc3BvbnNlLnN0YXR1c30sIOWGheWuuemVv+W6pjogJHtyZXNwb25zZVRleHQubGVuZ3RofWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcmVzcG9uc2VUZXh0LnRyaW0oKSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDop6PmnpDmnI3liqHlmajov5Tlm57nqbrlk43lupQgKEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9KWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCk7XHJcbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdb6L2s5a2YXSDop6PmnpBBUEkgSlNPTuino+aekOWksei0pTonLCBwYXJzZUVycm9yKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdb6L2s5a2YXSDop6PmnpBBUEnlk43lupTnirbmgIE6JywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDlsJ3or5Xojrflj5bpg6jliIblk43lupTlhoXlrrnnlKjkuo7osIPor5VcclxuICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ+aXoOazleiOt+WPluWTjeW6lOaWh+acrCcpO1xyXG4gICAgICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPSByZXNwb25zZVRleHQuc3Vic3RyaW5nKDAsIDUwMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDop6PmnpBBUEkgSlNPTuino+aekOWksei0pSAoSFRUUCAke3Jlc3BvbnNlLnN0YXR1c30pOiAke3BhcnNlRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNlRXJyb3IubWVzc2FnZSA6ICfmnKrnn6Xop6PmnpDplJnor68nfS4g5ZON5bqU54mH5q61OiAke3RydW5jYXRlZFRleHR9YCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8ICfop4bpopHop6PmnpDlpLHotKUnKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Hov5Tlm57nmoTmlbDmja5cclxuICAgICAgaWYgKCFyZXN1bHQuZGF0YSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJ6L+U5Zue55qE5pWw5o2u5Li656m6JylcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8ge3sgQVVSQTogTW9kaWZ5IC0g56e76Zmk5rWL6K+VQVBJ6LCD55So77yM55u05o6l6aqM6K+B5pWw5o2u5a6M5pW05oCnIH19XHJcbiAgICAgIC8vIOWvueS6juinhumikeexu+Wei++8jOajgOafpVVSTOWtl+autVxyXG4gICAgICBpZiAocmVzdWx0LmRhdGEubWVkaWFUeXBlID09PSBNZWRpYVR5cGUuVklERU8gJiYgIXJlc3VsdC5kYXRhLnVybCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6KeG6aKR6Kej5p6Q5oiQ5Yqf5L2G5pyq6L+U5Zue5pyJ5pWI55qE6KeG6aKRVVJMJylcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5a+55LqO6KeG6aKR57G75Z6L77yM56Gu5L+dVVJM5a2X5q615piv5pyJ5pWI55qE572R5Z2AXHJcbiAgICAgIGlmIChyZXN1bHQuZGF0YS5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5WSURFTyAmJiByZXN1bHQuZGF0YS51cmwpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbmV3IFVSTChyZXN1bHQuZGF0YS51cmwpXHJcbiAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOi/lOWbnueahFVSTOaXoOaViDogJHtyZXN1bHQuZGF0YS51cmx9YClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOWvueS6juWbvumbhuexu+Wei++8jOajgOafpeWbvueJh+aVsOe7hFxyXG4gICAgICBpZiAocmVzdWx0LmRhdGEubWVkaWFUeXBlID09PSBNZWRpYVR5cGUuSU1BR0VfQUxCVU0pIHtcclxuICAgICAgICBpZiAoIXJlc3VsdC5kYXRhLmltYWdlcyB8fCByZXN1bHQuZGF0YS5pbWFnZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+Wbvumbhuino+aekOaIkOWKn+S9huayoeacieaJvuWIsOS7u+S9leWbvueJhycpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDlm77pm4bop6PmnpDmiJDlip/vvIzljIXlkKsgJHtyZXN1bHQuZGF0YS5pbWFnZXMubGVuZ3RofSDlvKDlm77niYdgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g6Kej5p6Q5oiQ5Yqf77yM6I635Y+W5YiwJHtyZXN1bHQuZGF0YS5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5WSURFTyA/ICfop4bpopEnIDogJ+Wbvumbhid9OiAke3Jlc3VsdC5kYXRhLnRpdGxlfWApXHJcbiAgICAgIC8vIHt7IEFVUkE6IE1vZGlmeSAtIOS/ruWkjeWbvumbhuino+aekOaXtnVybC5zdWJzdHJpbmfplJnor6/vvIzmt7vliqDnsbvlnovliKTmlq0gfX1cclxuICAgICAgaWYgKHJlc3VsdC5kYXRhLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLlZJREVPICYmIHJlc3VsdC5kYXRhLnVybCAmJiB0eXBlb2YgcmVzdWx0LmRhdGEudXJsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDop4bpopFVUkw6ICR7cmVzdWx0LmRhdGEudXJsLnN1YnN0cmluZygwLCA1MCl9Li4uYClcclxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZGF0YS5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5JTUFHRV9BTEJVTSAmJiByZXN1bHQuZGF0YS5pbWFnZXMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g5Zu+6ZuG5YyF5ZCrICR7cmVzdWx0LmRhdGEuaW1hZ2VzLmxlbmd0aH0g5byg5Zu+54mHYClcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdb6L2s5a2YXSDop4bpopHop6PmnpDplJnor686JywgZXJyb3IpXHJcbiAgICAgIHRocm93IGVycm9yXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDkuIrkvKDlqpLkvZPliLBXZWJEQVZcclxuICBzdGF0aWMgYXN5bmMgdXBsb2FkVG9XZWJEQVYoXHJcbiAgICBtZWRpYUluZm86IFBhcnNlZFZpZGVvSW5mbyxcclxuICAgIHdlYmRhdkNvbmZpZzogV2ViREFWQ29uZmlnLFxyXG4gICAgZm9sZGVyUGF0aD86IHN0cmluZ1xyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBtYXhSZXRyaWVzID0gNTsgLy8g5aKe5Yqg5pyA5aSn6YeN6K+V5qyh5pWw5YiwNeasoVxyXG4gICAgbGV0IGF0dGVtcHQgPSAwO1xyXG4gICAgbGV0IGxhc3RFcnJvcjtcclxuICAgIFxyXG4gICAgLy8g5qC55o2u5aqS5L2T57G75Z6L55Sf5oiQ5paH5Lu25ZCNXHJcbiAgICBsZXQgZmlsZU5hbWUgPSAnJztcclxuICAgIGlmIChtZWRpYUluZm8ubWVkaWFUeXBlID09PSBNZWRpYVR5cGUuVklERU8gJiYgbWVkaWFJbmZvLnVybCkge1xyXG4gICAgICAvLyDop4bpopHmlofku7blkI1cclxuICAgICAgY29uc3QgZm9ybWF0ID0gdGhpcy5pbmZlclZpZGVvRm9ybWF0KG1lZGlhSW5mby5mb3JtYXQsIG1lZGlhSW5mby51cmwpO1xyXG4gICAgICBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVGaWxlTmFtZShtZWRpYUluZm8udGl0bGUsIGZvcm1hdCk7XHJcbiAgICB9IGVsc2UgaWYgKG1lZGlhSW5mby5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5JTUFHRV9BTEJVTSAmJiBtZWRpYUluZm8uaW1hZ2VzICYmIG1lZGlhSW5mby5pbWFnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyDlm77pm4bmlofku7blpLnlkI0gLSDkvb/nlKjop6PmnpDlkI7nmoTmoIfpopjlkI3np7BcclxuICAgICAgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlRm9sZGVyTmFtZShtZWRpYUluZm8udGl0bGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3aGlsZSAoYXR0ZW1wdCA8IG1heFJldHJpZXMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhdHRlbXB0Kys7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIFdlYkRBVuS4iuS8oOWwneivlSAke2F0dGVtcHR9LyR7bWF4UmV0cmllc306ICR7bWVkaWFJbmZvLm1lZGlhVHlwZSA9PT0gTWVkaWFUeXBlLlZJREVPID8gJ+inhumikScgOiAn5Zu+6ZuGJ31gKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Byb3h5L3dlYmRhdicsIHtcclxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgdmlkZW9Vcmw6IG1lZGlhSW5mby5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5WSURFTyA/IG1lZGlhSW5mby51cmwgOiB1bmRlZmluZWQsIC8vIOinhumikVVSTFxyXG4gICAgICAgICAgICBpbWFnZXM6IG1lZGlhSW5mby5tZWRpYVR5cGUgPT09IE1lZGlhVHlwZS5JTUFHRV9BTEJVTSA/IG1lZGlhSW5mby5pbWFnZXMgOiB1bmRlZmluZWQsIC8vIOWbvumbhuWbvueJh+WIl+ihqFxyXG4gICAgICAgICAgICB3ZWJkYXZDb25maWcsXHJcbiAgICAgICAgICAgIGZpbGVOYW1lLCAvLyDmlofku7blkI1cclxuICAgICAgICAgICAgZm9sZGVyUGF0aDogZm9sZGVyUGF0aCB8fCAnJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8ge3sgQVVSQTogTW9kaWZ5IC0g5re75Yqg5pu05by655qESlNPTuino+aekOmUmeivr+WkhOeQhiB9fVxyXG4gICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDljp/lp4vlk43lupTnirbmgIE6ICR7cmVzcG9uc2Uuc3RhdHVzfSwg5YaF5a656ZW/5bqmOiAke3Jlc3BvbnNlVGV4dC5sZW5ndGh9YCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICghcmVzcG9uc2VUZXh0LnRyaW0oKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOacjeWKoeWZqOi/lOWbnuepuuWTjeW6lCAoSFRUUCAke3Jlc3BvbnNlLnN0YXR1c30pYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcclxuICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdb6L2s5a2YXSBKU09O6Kej5p6Q5aSx6LSlOicsIHBhcnNlRXJyb3IpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignW+i9rOWtmF0g5ZON5bqU54q25oCBOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOWwneivleiOt+WPlumDqOWIhuWTjeW6lOWGheWuueeUqOS6juiwg+ivlVxyXG4gICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICfml6Dms5Xojrflj5blk43lupTmlofmnKwnKTtcclxuICAgICAgICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPSByZXNwb25zZVRleHQuc3Vic3RyaW5nKDAsIDUwMCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSlNPTuino+aekOWksei0pSAoSFRUUCAke3Jlc3BvbnNlLnN0YXR1c30pOiAke3BhcnNlRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNlRXJyb3IubWVzc2FnZSA6ICfmnKrnn6Xop6PmnpDplJnor68nfS4g5ZON5bqU54mH5q61OiAke3RydW5jYXRlZFRleHR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgIC8vIOWvueS6jjQwMy80MDHplJnor6/vvIzlnKjnrKzkuIDmrKHlsJ3or5Xml7bov5vooYzph43or5VcclxuICAgICAgICAgIGNvbnN0IHNob3VsZFJldHJ5SW1tZWRpYXRlbHkgPVxyXG4gICAgICAgICAgICAocmVzdWx0LmVycm9yPy5pbmNsdWRlcygnNDAzJykgfHwgcmVzdWx0LmVycm9yPy5pbmNsdWRlcygnNDAxJykpICYmXHJcbiAgICAgICAgICAgIGF0dGVtcHQgPT09IDE7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKHNob3VsZFJldHJ5SW1tZWRpYXRlbHkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1vovazlrZhdIOadg+mZkOmUmeivr++8jOeri+WNs+i/m+ihjOmHjeivlScpO1xyXG4gICAgICAgICAgICAvLyDnrYnlvoXkuIDlsI/mrrXml7bpl7TlkI7nq4vljbPph43or5VcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOWvueS6jjQwNOmUmeivr++8jOaPkOS+m+abtOWFt+S9k+eahOmUmeivr+S/oeaBr1xyXG4gICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IHJlc3VsdC5lcnJvciB8fCAn5aqS5L2T5LiK5Lyg5aSx6LSlJztcclxuICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3I/LmluY2x1ZGVzKCc0MDQnKSkge1xyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBg5LiK5Lyg6Lev5b6E5LiN5a2Y5ZyoICg0MDQp44CC6K+35qOA5p+lV2ViREFW5pyN5Yqh5Zmo5Zyw5Z2A5ZKM6Lev5b6E6YWN572u5piv5ZCm5q2j56Gu44CC6ZSZ6K+v6K+m5oOFOiAke3Jlc3VsdC5lcnJvcn1gO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDkuIrkvKDmiJDlip/vvIzlsJ3or5XmrKHmlbA6ICR7YXR0ZW1wdH1gKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmZpbGVQYXRoO1xyXG4gICAgICAgIFxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGxhc3RFcnJvciA9IGVycm9yO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFvovazlrZhdIOS4iuS8oOWwneivlSAke2F0dGVtcHR9IOWksei0pTpgLCBlcnJvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm6ZyA6KaB6YeN6K+VXHJcbiAgICAgICAgY29uc3Qgc2hvdWxkUmV0cnkgPSB0aGlzLnNob3VsZFJldHJ5VXBsb2FkKGVycm9yLCBhdHRlbXB0KTtcclxuICAgICAgICBpZiAoYXR0ZW1wdCA8IG1heFJldHJpZXMgJiYgc2hvdWxkUmV0cnkpIHtcclxuICAgICAgICAgIC8vIOS9v+eUqOaMh+aVsOmAgOmBv+etlueVpVxyXG4gICAgICAgICAgY29uc3Qgd2FpdFRpbWUgPSBNYXRoLm1pbigxMDAwICogTWF0aC5wb3coMiwgYXR0ZW1wdCAtIDEpLCAxMDAwMCk7IC8vIOacgOWkp+etieW+hTEw56eSXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g562J5b6FICR7d2FpdFRpbWUvMTAwMH0g56eS5ZCO6YeN6K+VLi4uYCk7XHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgd2FpdFRpbWUpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYnJlYWs7IC8vIOS4jeWGjemHjeivlVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDmiYDmnInlsJ3or5Xpg73lpLHotKVcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIOaJgOacieS4iuS8oOWwneivleWdh+Wksei0pScpO1xyXG4gICAgdGhyb3cgbGFzdEVycm9yIHx8IG5ldyBFcnJvcign6KeG6aKR5LiK5Lyg5aSx6LSl77yM5bey6L6+5Yiw5pyA5aSn6YeN6K+V5qyh5pWwJyk7XHJcbiAgfVxyXG5cclxuICAvLyDljZXkuKrop4bpopHovazlrZhcclxuICBzdGF0aWMgYXN5bmMgY29udmVydFNpbmdsZShcclxuICAgIHRhc2s6IENvbnZlcnNpb25UYXNrLFxyXG4gICAgcGFyc2VyQ29uZmlnOiBWaWRlb1BhcnNlckNvbmZpZyxcclxuICAgIHdlYmRhdkNvbmZpZzogV2ViREFWQ29uZmlnLFxyXG4gICAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyLCBzdGF0dXM6IFRhc2tTdGF0dXMpID0+IHZvaWRcclxuICApOiBQcm9taXNlPENvbnZlcnNpb25UYXNrPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmm7TmlrDnirbmgIHkuLrop6PmnpDkuK1cclxuICAgICAgdGFzay5zdGF0dXMgPSBUYXNrU3RhdHVzLlBBUlNJTkdcclxuICAgICAgb25Qcm9ncmVzcz8uKDIwLCBUYXNrU3RhdHVzLlBBUlNJTkcpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgW+i9rOWtmF0g5byA5aeL6Kej5p6Q6KeG6aKROiAke3Rhc2sudmlkZW9Vcmx9YClcclxuICAgICAgY29uc29sZS5sb2coYFvovazlrZhdIOS9v+eUqOino+aekOWZqDogJHtwYXJzZXJDb25maWcubmFtZX0gKCR7cGFyc2VyQ29uZmlnLmFwaVVybH0pYClcclxuXHJcbiAgICAgIC8vIOino+aekOinhumikVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIOa3u+WKoOinhumikVVSTOagvOW8j+ajgOafpVxyXG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkVXJsKHRhc2sudmlkZW9VcmwpKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+inhumikemTvuaOpeagvOW8j+aXoOaViO+8jOivt+ehruS/neS7pWh0dHA6Ly/miJZodHRwczovL+W8gOWktCcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHt7IEFVUkE6IE1vZGlmeSAtIOenu+mZpOWkh+eUqOa1i+ivleaooeW8j++8jOebtOaOpeS9v+eUqOS4u+ino+aekOe7k+aenCB9fVxyXG4gICAgICAgIGxldCBwYXJzZWRJbmZvO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBwYXJzZWRJbmZvID0gYXdhaXQgdGhpcy5wYXJzZVZpZGVvKHRhc2sudmlkZW9VcmwsIHBhcnNlckNvbmZpZylcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDop6PmnpDmiJDlip/vvIzlqpLkvZPnsbvlnos6ICR7cGFyc2VkSW5mby5tZWRpYVR5cGV9YClcclxuICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdb6L2s5a2YXSDop6PmnpDlpLHotKU6JywgcGFyc2VFcnJvcilcclxuICAgICAgICAgIHRocm93IHBhcnNlRXJyb3JcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGFzay5wYXJzZWRWaWRlb0luZm8gPSBwYXJzZWRJbmZvXHJcbiAgICAgICAgdGFzay52aWRlb1RpdGxlID0gcGFyc2VkSW5mby50aXRsZVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBb6L2s5a2YXSDop6PmnpDlrozmiJA6ICR7cGFyc2VkSW5mby50aXRsZX1gKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1vovazlrZhdIOinhumikeino+aekOWksei0pTonLCBlcnJvcilcclxuICAgICAgICB0YXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuRkFJTEVEXHJcbiAgICAgICAgbGV0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6KeG6aKR6Kej5p6Q5aSx6LSlJ1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOa3u+WKoOabtOWPi+WlveeahOmUmeivr+S/oeaBr1xyXG4gICAgICAgIGlmIChlcnJvck1zZy5pbmNsdWRlcygnVVJM5Li656m6JykpIHtcclxuICAgICAgICAgIGVycm9yTXNnID0gJ1VSTOS4uuepuiAtIOino+aekEFQSeaXoOazleaPkOWPluinhumikVVSTO+8jOivt+WwneivleWFtuS7luino+aekEFQSeaIluajgOafpemTvuaOpSdcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGFzay5lcnJvciA9IGVycm9yTXNnXHJcbiAgICAgICAgdGFzay5jb21wbGV0ZWRBdCA9IG5ldyBEYXRlKClcclxuICAgICAgICByZXR1cm4gdGFza1xyXG4gICAgICB9XHJcblxyXG4gICAgICBvblByb2dyZXNzPy4oNTAsIFRhc2tTdGF0dXMuUEFSU0lORylcclxuICAgICAgXHJcbiAgICAgIC8vIOabtOaWsOeKtuaAgeS4uuS4iuS8oOS4rVxyXG4gICAgICB0YXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuVVBMT0FESU5HXHJcbiAgICAgIG9uUHJvZ3Jlc3M/Lig2MCwgVGFza1N0YXR1cy5VUExPQURJTkcpXHJcblxyXG4gICAgICAvLyDkuIrkvKDlqpLkvZNcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLnVwbG9hZFRvV2ViREFWKFxyXG4gICAgICAgIHRhc2sucGFyc2VkVmlkZW9JbmZvISwgXHJcbiAgICAgICAgd2ViZGF2Q29uZmlnXHJcbiAgICAgIClcclxuXHJcbiAgICAgIC8vIOabtOaWsOS7u+WKoeeKtuaAgVxyXG4gICAgICB0YXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuU1VDQ0VTU1xyXG4gICAgICB0YXNrLmNvbXBsZXRlZEF0ID0gbmV3IERhdGUoKVxyXG4gICAgICB0YXNrLnVwbG9hZFJlc3VsdCA9IHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGZpbGVQYXRoXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9uUHJvZ3Jlc3M/LigxMDAsIFRhc2tTdGF0dXMuU1VDQ0VTUylcclxuXHJcbi8vIOS7u+WKoeWujOaIkOWQjuaJp+ihjOa4heeQhlxyXG4gICAgICBhd2FpdCBDbGVhbnVwU2VydmljZS5jbGVhbnVwQWZ0ZXJUYXNrQ29tcGxldGlvbih0YXNrKTtcclxuICAgICAgcmV0dXJuIHRhc2tcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIOabtOaWsOS7u+WKoeS4uuWksei0peeKtuaAgVxyXG4gICAgICB0YXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuRkFJTEVEXHJcbiAgICAgIHRhc2suY29tcGxldGVkQXQgPSBuZXcgRGF0ZSgpXHJcbiAgICAgIHRhc2suZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfovazlrZjov4fnqIvkuK3lj5HnlJ/mnKrnn6XplJnor68nXHJcbiAgICAgIHRhc2sudXBsb2FkUmVzdWx0ID0ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB0YXNrLmVycm9yXHJcbiAgICAgIH1cclxuXHJcbi8vIOS7u+WKoeWujOaIkOWQjuaJp+ihjOa4heeQhlxyXG4gICAgICBhd2FpdCBDbGVhbnVwU2VydmljZS5jbGVhbnVwQWZ0ZXJUYXNrQ29tcGxldGlvbih0YXNrKTtcclxuICAgICAgb25Qcm9ncmVzcz8uKDAsIFRhc2tTdGF0dXMuRkFJTEVEKVxyXG5cclxuICAgICAgcmV0dXJuIHRhc2tcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOaJuemHj+i9rOWtmFxyXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0QmF0Y2goXHJcbiAgICBiYXRjaFRhc2s6IEJhdGNoVGFzayxcclxuICAgIG9uUHJvZ3Jlc3M/OiAoYmF0Y2hQcm9ncmVzczogbnVtYmVyLCBjdXJyZW50VGFzaz86IENvbnZlcnNpb25UYXNrKSA9PiB2b2lkXHJcbiAgKTogUHJvbWlzZTxCYXRjaFRhc2s+IHtcclxuICAgIGJhdGNoVGFzay5zdGF0dXMgPSBUYXNrU3RhdHVzLlBBUlNJTkdcclxuICAgIFxyXG4gICAgY29uc3QgdG90YWxUYXNrcyA9IGJhdGNoVGFzay50YXNrcy5sZW5ndGhcclxuICAgIGxldCBjb21wbGV0ZWRUYXNrcyA9IDBcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhdGNoVGFzay50YXNrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCB0YXNrID0gYmF0Y2hUYXNrLnRhc2tzW2ldXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIOWkhOeQhuWNleS4quS7u+WKoVxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRUYXNrID0gYXdhaXQgdGhpcy5jb252ZXJ0U2luZ2xlKFxyXG4gICAgICAgICAgdGFzayxcclxuICAgICAgICAgIGJhdGNoVGFzay5wYXJzZXJDb25maWcsXHJcbiAgICAgICAgICBiYXRjaFRhc2sud2ViZGF2Q29uZmlnLFxyXG4gICAgICAgICAgKHByb2dyZXNzLCBzdGF0dXMpID0+IHtcclxuICAgICAgICAgICAgLy8g6K6h566X5oC75L2T6L+b5bqmXHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tQcm9ncmVzcyA9IChjb21wbGV0ZWRUYXNrcyArIHByb2dyZXNzIC8gMTAwKSAvIHRvdGFsVGFza3MgKiAxMDBcclxuICAgICAgICAgICAgb25Qcm9ncmVzcz8uKHRhc2tQcm9ncmVzcywgdGFzaylcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGJhdGNoVGFzay50YXNrc1tpXSA9IHVwZGF0ZWRUYXNrXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHVwZGF0ZWRUYXNrLnN0YXR1cyA9PT0gVGFza1N0YXR1cy5TVUNDRVNTKSB7XHJcbiAgICAgICAgICBjb21wbGV0ZWRUYXNrcysrXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGDmibnph4/ku7vliqHkuK3nmoTljZXkuKrku7vliqHlpLHotKU6YCwgZXJyb3IpXHJcbiAgICAgICAgLy8g57un57ut5aSE55CG5LiL5LiA5Liq5Lu75YqhXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOabtOaWsOaJuemHj+S7u+WKoeeKtuaAgVxyXG4gICAgICBiYXRjaFRhc2suY29tcGxldGVkVGFza3MgPSBjb21wbGV0ZWRUYXNrc1xyXG4gICAgICBcclxuICAgICAgLy8g6K6h566X5oC75L2T6L+b5bqmXHJcbiAgICAgIGNvbnN0IG92ZXJhbGxQcm9ncmVzcyA9IChpICsgMSkgLyB0b3RhbFRhc2tzICogMTAwXHJcbiAgICAgIG9uUHJvZ3Jlc3M/LihvdmVyYWxsUHJvZ3Jlc3MsIHRhc2spXHJcblxyXG4gICAgICAvLyDmt7vliqDlu7bov5/pgb/lhY3or7fmsYLov4fkuo7popHnuYFcclxuICAgICAgaWYgKGkgPCBiYXRjaFRhc2sudGFza3MubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOabtOaWsOaJuemHj+S7u+WKoeacgOe7iOeKtuaAgVxyXG4gICAgYmF0Y2hUYXNrLmNvbXBsZXRlZEF0ID0gbmV3IERhdGUoKVxyXG4gICAgXHJcbiAgICBpZiAoY29tcGxldGVkVGFza3MgPT09IHRvdGFsVGFza3MpIHtcclxuICAgICAgYmF0Y2hUYXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuU1VDQ0VTU1xyXG4vLyDmibnph4/ku7vliqHlrozmiJDlkI7miafooYzmuIXnkIZcclxuICAgICAgYXdhaXQgQ2xlYW51cFNlcnZpY2UuY2xlYW51cEFmdGVyVGFza0NvbXBsZXRpb24oYmF0Y2hUYXNrKTtcclxuICAgIH0gZWxzZSBpZiAoY29tcGxldGVkVGFza3MgPT09IDApIHtcclxuICAgICAgYmF0Y2hUYXNrLnN0YXR1cyA9IFRhc2tTdGF0dXMuRkFJTEVEXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBiYXRjaFRhc2suc3RhdHVzID0gVGFza1N0YXR1cy5TVUNDRVNTIC8vIOmDqOWIhuaIkOWKn+S5n+agh+iusOS4uuaIkOWKn1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBiYXRjaFRhc2tcclxuICB9XHJcblxyXG4gIC8vIOeUn+aIkOaWh+S7tuWQjVxyXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRmlsZU5hbWUodGl0bGU6IHN0cmluZywgZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgLy8g5riF55CG5paH5Lu25ZCN5Lit55qE6Z2e5rOV5a2X56ymXHJcbiAgICBjb25zdCBjbGVhblRpdGxlID0gdGl0bGVcclxuICAgICAgLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFx4MDAtXFx4MUZdL2csICdfJykgIC8vIOenu+mZpOmdnuazleWtl+espuWSjOaOp+WItuWtl+esplxyXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCAnXycpICAgICAgICAgICAgICAgICAgIC8vIOWwhuepuuagvOabv+aNouS4uuS4i+WIkue6v1xyXG4gICAgICAucmVwbGFjZSgvXysvZywgJ18nKSAgICAgICAgICAgICAgICAgICAgLy8g5bCG5aSa5Liq5LiL5YiS57q/5ZCI5bm25Li65LiA5LiqXHJcbiAgICAgIC5yZXBsYWNlKC9eX3xfJC9nLCAnJykgICAgICAgICAgICAgICAgIC8vIOenu+mZpOW8gOWktOWSjOe7k+WwvueahOS4i+WIkue6v1xyXG4gICAgICAuc3Vic3RyaW5nKDAsIDEwMCkgICAgICAgICAgICAgICAgICAgICAgLy8g6ZmQ5Yi26ZW/5bqmXHJcbiAgICAgIC50cmltKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDljrvpmaTpppblsL7nqbrmoLxcclxuXHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpXHJcbiAgICByZXR1cm4gYCR7Y2xlYW5UaXRsZX1fJHt0aW1lc3RhbXB9LiR7Zm9ybWF0fWBcclxuICB9XHJcblxyXG4gIC8vIOeUn+aIkOaWh+S7tuWkueWQje+8iOeUqOS6juWbvumbhu+8iVxyXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRm9sZGVyTmFtZSh0aXRsZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIOa4heeQhuaWh+S7tuWkueWQjeS4reeahOmdnuazleWtl+esplxyXG4gICAgY29uc3QgY2xlYW5UaXRsZSA9IHRpdGxlXHJcbiAgICAgIC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxceDAwLVxceDFGXS9nLCAnXycpICAvLyDnp7vpmaTpnZ7ms5XlrZfnrKblkozmjqfliLblrZfnrKZcclxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJ18nKSAgICAgICAgICAgICAgICAgICAvLyDlsIbnqbrmoLzmm7/mjaLkuLrkuIvliJLnur9cclxuICAgICAgLnJlcGxhY2UoL18rL2csICdfJykgICAgICAgICAgICAgICAgICAgIC8vIOWwhuWkmuS4quS4i+WIkue6v+WQiOW5tuS4uuS4gOS4qlxyXG4gICAgICAucmVwbGFjZSgvXl98XyQvZywgJycpICAgICAgICAgICAgICAgICAvLyDnp7vpmaTlvIDlpLTlkoznu5PlsL7nmoTkuIvliJLnur9cclxuICAgICAgLnN1YnN0cmluZygwLCAxMDApICAgICAgICAgICAgICAgICAgICAgIC8vIOmZkOWItumVv+W6plxyXG4gICAgICAudHJpbSgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y676Zmk6aaW5bC+56m65qC8XHJcblxyXG4gICAgcmV0dXJuIGNsZWFuVGl0bGU7XHJcbiAgfVxyXG5cclxuICAvLyDmtYvor5VXZWJEQVbov57mjqVcclxuICBzdGF0aWMgYXN5bmMgdGVzdFdlYkRBVkNvbm5lY3Rpb24od2ViZGF2Q29uZmlnOiBXZWJEQVZDb25maWcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOehruS/nVVSTOe8lueggeato+ehru+8jOmBv+WFjeeJueauiuWtl+espumXrumimFxyXG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgICAgICBzZXJ2ZXJVcmw6IGVuY29kZVVSSUNvbXBvbmVudCh3ZWJkYXZDb25maWcudXJsKSxcclxuICAgICAgICB1c2VybmFtZTogZW5jb2RlVVJJQ29tcG9uZW50KHdlYmRhdkNvbmZpZy51c2VybmFtZSksXHJcbiAgICAgICAgcGFzc3dvcmQ6IGVuY29kZVVSSUNvbXBvbmVudCh3ZWJkYXZDb25maWcucGFzc3dvcmQpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgW1dlYkRBVl0g5rWL6K+V6L+e5o6lOiAke3dlYmRhdkNvbmZpZy51cmx9YClcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9wcm94eS93ZWJkYXY/JHtwYXJhbXMudG9TdHJpbmcoKX1gKVxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXHJcbiAgICAgICAgbWVzc2FnZTogcmVzdWx0LnN1Y2Nlc3MgPyAn6L+e5o6l5rWL6K+V5oiQ5YqfJyA6IHJlc3VsdC5lcnJvciB8fCAn6L+e5o6l5rWL6K+V5aSx6LSlJ1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbV2ViREFWXSDov57mjqXmtYvor5XplJnor686JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6L+e5o6l5rWL6K+V5aSx6LSlJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDnlJ/miJDku7vliqFJRFxyXG4gIHN0YXRpYyBnZW5lcmF0ZVRhc2tJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGB0YXNrXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxyXG4gIH1cclxuXHJcbiAgLy8g55Sf5oiQ5om56YeP5Lu75YqhSURcclxuICBzdGF0aWMgZ2VuZXJhdGVCYXRjaElkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYGJhdGNoXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxyXG4gIH1cclxuXHJcbiAgLy8g6Kej5p6Q6KeG6aKR6ZO+5o6l5YiX6KGoXHJcbiAgc3RhdGljIHBhcnNlVmlkZW9VcmxzKHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJylcclxuICAgIGNvbnN0IHVybHM6IHN0cmluZ1tdID0gW11cclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKVxyXG4gICAgICBpZiAodHJpbW1lZCkge1xyXG4gICAgICAgIC8vIOWwneivleS7juWMheWQq+WFtuS7luaWh+Wtl+eahOi+k+WFpeS4reaPkOWPllVSTFxyXG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZFVybCA9IHRoaXMuZXh0cmFjdFJlYWxVcmwodHJpbW1lZClcclxuICAgICAgICBpZiAoZXh0cmFjdGVkVXJsICYmIHRoaXMuaXNWYWxpZFVybChleHRyYWN0ZWRVcmwpKSB7XHJcbiAgICAgICAgICB1cmxzLnB1c2goZXh0cmFjdGVkVXJsKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gdXJsc1xyXG4gIH1cclxuXHJcbiAgLy8g6aqM6K+BVVJM5qC85byPXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaXNWYWxpZFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6aaW5YWI5o+Q5Y+W5oqW6Z+z562J5bmz5Y+w55qE55yf5a6e6ZO+5o6lXHJcbiAgICAgIGNvbnN0IGV4dHJhY3RlZFVybCA9IHRoaXMuZXh0cmFjdFJlYWxVcmwodXJsKVxyXG4gICAgICBuZXcgVVJMKGV4dHJhY3RlZFVybClcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8g5aSE55CG55+t6KeG6aKR5YiG5Lqr5paH5pys77yM5o+Q5Y+W55yf5a6eVVJMXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZXh0cmFjdFJlYWxVcmwoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyDlpoLmnpzlt7Lnu4/mmK/mnInmlYhVUkzvvIznm7TmjqXov5Tlm55cclxuICAgIHRyeSB7XHJcbiAgICAgIG5ldyBVUkwoaW5wdXQpXHJcbiAgICAgIHJldHVybiBpbnB1dFxyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIC8vIOS4jeaYr+acieaViFVSTO+8jOWwneivleaPkOWPllxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDlpITnkIbmipbpn7PliIbkuqvmlofmnKzmoLzlvI9cclxuICAgIC8vIOS+i+WmgjogXCI3Ljk3IERVTDovIDAyLzA1IHpAVC55ZyDkuI3nn6XpgZPllYrooqvlraPojrnojrnmir3kuobkuYvlkI7lsLHov5nmoLfkuoYjIOawuOWKq+aXoOmXtOaJi+a4uCAjIOWto+iOueiOuSAjIOiDoeahgyAjIGNvcyAjIOeMjuWlhyAgaHR0cHM6Ly92LmRvdXlpbi5jb20vZDY4OUVzT0FsdWcvIOWkjeWItuatpOmTvuaOpe+8jOaJk+W8gERvdemfs+aQnOe0ou+8jOebtOaOpeingueci+inhumike+8gVwiXHJcbiAgICAvLyDmlLnov5vnmoRVUkzmraPliJnooajovr7lvI/vvIzog73lpJ/mm7Tlpb3lnLDljLnphY3lkITnp43liIbkuqvmlofmnKzkuK3nmoRVUkxcclxuICAgIGNvbnN0IHVybFJlZ2V4ID0gLyhodHRwcz86XFwvXFwvKD86d3d3XFwuKT9bLWEtekEtWjAtOUA6JS5fXFwrfiM9XXsxLDI1Nn1cXC5bYS16QS1aMC05KCldezEsNn1cXGIoPzpbLWEtekEtWjAtOSgpQDolX1xcKy5+Iz8mPVxcLz1dKikpL2dcclxuICAgIGNvbnN0IG1hdGNoZXMgPSBpbnB1dC5tYXRjaCh1cmxSZWdleClcclxuICAgIFxyXG4gICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIOi/lOWbnuesrOS4gOS4quWMuemFjeeahFVSTOW5tuenu+mZpOacq+WwvuaWnOadoFxyXG4gICAgICByZXR1cm4gbWF0Y2hlc1swXS5yZXBsYWNlKC9cXC8kLywgJycpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBpbnB1dFxyXG4gIH1cclxuXHJcbiAgLy8g5Lyw566X5paH5Lu25aSn5bCP77yI5Z+65LqO5pe26ZW/77yJXHJcbiAgc3RhdGljIGVzdGltYXRlRmlsZVNpemUoZHVyYXRpb24/OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKCFkdXJhdGlvbikgcmV0dXJuIDBcclxuICAgIC8vIOWBh+iuvuW5s+Wdh+eggeeOh+S4uiAxTWJwc1xyXG4gICAgcmV0dXJuIGR1cmF0aW9uICogMTAyNCAqIDEwMjQgLyA4XHJcbiAgfVxyXG5cclxuICAvLyDmoLzlvI/ljJbmlofku7blpKflsI9cclxuICBzdGF0aWMgZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJ1xyXG4gICAgXHJcbiAgICBjb25zdCBrID0gMTAyNFxyXG4gICAgY29uc3Qgc2l6ZXMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InLCAnVEInXVxyXG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpXHJcbiAgICBcclxuICAgIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKDIpKSArICcgJyArIHNpemVzW2ldXHJcbiAgfVxyXG5cclxuICAvLyDmoLzlvI/ljJbml7bplb9cclxuICBzdGF0aWMgZm9ybWF0RHVyYXRpb24oc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMClcclxuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNvbmRzICUgMzYwMCkgLyA2MClcclxuICAgIGNvbnN0IHNlY3MgPSBNYXRoLmZsb29yKHNlY29uZHMgJSA2MClcclxuICAgIFxyXG4gICAgaWYgKGhvdXJzID4gMCkge1xyXG4gICAgICByZXR1cm4gYCR7aG91cnN9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7c2Vjcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGAke21pbnV0ZXN9OiR7c2Vjcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YFxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyB7eyBBVVJBOiBBZGQgLSDmmbrog73op4bpopHmoLzlvI/mjqjmlq3mlrnms5UgfX1cclxuICBwcml2YXRlIHN0YXRpYyBpbmZlclZpZGVvRm9ybWF0KHByb3ZpZGVkRm9ybWF0OiBzdHJpbmcgfCB1bmRlZmluZWQsIHZpZGVvVXJsPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIOaUr+aMgeeahOinhumikeagvOW8j+WIl+ihqFxyXG4gICAgY29uc3QgdmFsaWRGb3JtYXRzID0gW1xyXG4gICAgICAnbXA0JywgJ2F2aScsICdtb3YnLCAnd212JywgJ2ZsdicsICd3ZWJtJywgJ21rdicsICdtNHYnLFxyXG4gICAgICAnM2dwJywgJ2Y0dicsICdhc2YnLCAncm0nLCAncm12YicsICd2b2InLCAnb2d2JywgJ20ydHMnLCAnbXRzJ1xyXG4gICAgXTtcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B5o+Q5L6b55qE5qC85byPXHJcbiAgICBpZiAocHJvdmlkZWRGb3JtYXQgJiYgdmFsaWRGb3JtYXRzLmluY2x1ZGVzKHByb3ZpZGVkRm9ybWF0LnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgIHJldHVybiBwcm92aWRlZEZvcm1hdC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDku45VUkzmjqjmlq1cclxuICAgIGlmICh2aWRlb1VybCkge1xyXG4gICAgICBjb25zdCB1cmxGb3JtYXQgPSB0aGlzLmV4dHJhY3RGb3JtYXRGcm9tVXJsKHZpZGVvVXJsKTtcclxuICAgICAgaWYgKHVybEZvcm1hdCAmJiB2YWxpZEZvcm1hdHMuaW5jbHVkZXModXJsRm9ybWF0LnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybEZvcm1hdC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOm7mOiupG1wNFxyXG4gICAgcmV0dXJuICdtcDQnO1xyXG4gIH1cclxuICBcclxuICAvLyB7eyBBVVJBOiBBZGQgLSDku45VUkzmj5Dlj5bmoLzlvI/mianlsZXlkI0gfX1cclxuICBwcml2YXRlIHN0YXRpYyBleHRyYWN0Rm9ybWF0RnJvbVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xyXG4gICAgICBjb25zdCBwYXRobmFtZSA9IHVybE9iai5wYXRobmFtZTtcclxuICAgICAgY29uc3QgbGFzdERvdEluZGV4ID0gcGF0aG5hbWUubGFzdEluZGV4T2YoJy4nKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChsYXN0RG90SW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gcGF0aG5hbWUuc3Vic3RyaW5nKGxhc3REb3RJbmRleCArIDEpO1xyXG4gICAgICAgIHJldHVybiBleHRlbnNpb24udG9Mb3dlckNhc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAvLyBVUkzop6PmnpDlpLHotKXvvIzlv73nlaXplJnor69cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIHt7IEFVUkE6IEFkZCAtIOmqjOivgeinhumikeagvOW8j+aYr+WQpuacieaViCB9fVxyXG4gIHByaXZhdGUgc3RhdGljIGlzVmFsaWRWaWRlb0Zvcm1hdChmb3JtYXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgdmFsaWRGb3JtYXRzID0gW1xyXG4gICAgICAnbXA0JywgJ2F2aScsICdtb3YnLCAnd212JywgJ2ZsdicsICd3ZWJtJywgJ21rdicsICdtNHYnLFxyXG4gICAgICAnM2dwJywgJ2Y0dicsICdhc2YnLCAncm0nLCAncm12YicsICd2b2InLCAnb2d2JywgJ20ydHMnLCAnbXRzJ1xyXG4gICAgXTtcclxuICAgIHJldHVybiB2YWxpZEZvcm1hdHMuaW5jbHVkZXMoZm9ybWF0LnRvTG93ZXJDYXNlKCkpO1xyXG4gIH1cclxuICBcclxuICAvLyB7eyBBVVJBOiBBZGQgLSDliKTmlq3mmK/lkKblupTor6Xph43or5XkuIrkvKAgfX1cclxuICBwcml2YXRlIHN0YXRpYyBzaG91bGRSZXRyeVVwbG9hZChlcnJvcjogYW55LCBhdHRlbXB0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIC8vIOWmguaenOaYr+acgOWQjuS4gOasoeWwneivle+8jOS4jemHjeivlVxyXG4gICAgaWYgKGF0dGVtcHQgPj0gNSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOajgOafpemUmeivr+exu+Wei1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChlcnJvci5tZXNzYWdlIHx8IGVycm9yLnRvU3RyaW5nKCkpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDlr7nkuo7nvZHnu5zplJnor6/lp4vnu4jph43or5VcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnbmV0d29yayBlcnJvcicpIHx8XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoIGZhaWxlZCcpIHx8XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2Vjb25ucmVzZXQnKSB8fFxyXG4gICAgICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5a+55LqO5pyN5Yqh5Zmo6ZSZ6K+vKDV4eCnlp4vnu4jph43or5VcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTAwJykgfHxcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTAyJykgfHxcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTAzJykgfHxcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNTA0JykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5a+55LqO5p2D6ZmQ6ZSZ6K+vKDQwMy80MDEp5LuF5Zyo56ys5LiA5qyh5bCd6K+V5pe26YeN6K+VXHJcbiAgICAgIGlmICgoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCc0MDMnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJzQwMScpKSAmJiBhdHRlbXB0ID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g6buY6K6k5oOF5Ya15LiL77yM5a+55LqO5YmN5Yeg5qyh5bCd6K+V5YWB6K646YeN6K+VXHJcbiAgICByZXR1cm4gYXR0ZW1wdCA8IDM7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJUYXNrU3RhdHVzIiwiTWVkaWFUeXBlIiwiQ2xlYW51cFNlcnZpY2UiLCJDb252ZXJzaW9uU2VydmljZSIsInBhcnNlVmlkZW8iLCJ2aWRlb1VybCIsInBhcnNlckNvbmZpZyIsInRyaW0iLCJFcnJvciIsImFwaVVybCIsImV4dHJhY3RlZFVybCIsImV4dHJhY3RSZWFsVXJsIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXN1bHQiLCJyZXNwb25zZVRleHQiLCJ0ZXh0Iiwic3RhdHVzIiwibGVuZ3RoIiwicGFyc2UiLCJwYXJzZUVycm9yIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiY2F0Y2giLCJ0cnVuY2F0ZWRUZXh0IiwibWVzc2FnZSIsInN1Y2Nlc3MiLCJkYXRhIiwibWVkaWFUeXBlIiwiVklERU8iLCJ1cmwiLCJVUkwiLCJJTUFHRV9BTEJVTSIsImltYWdlcyIsInRpdGxlIiwidXBsb2FkVG9XZWJEQVYiLCJtZWRpYUluZm8iLCJ3ZWJkYXZDb25maWciLCJmb2xkZXJQYXRoIiwibWF4UmV0cmllcyIsImF0dGVtcHQiLCJsYXN0RXJyb3IiLCJmaWxlTmFtZSIsImZvcm1hdCIsImluZmVyVmlkZW9Gb3JtYXQiLCJnZW5lcmF0ZUZpbGVOYW1lIiwiZ2VuZXJhdGVGb2xkZXJOYW1lIiwidW5kZWZpbmVkIiwic2hvdWxkUmV0cnlJbW1lZGlhdGVseSIsImluY2x1ZGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZXJyb3JNZXNzYWdlIiwiZmlsZVBhdGgiLCJzaG91bGRSZXRyeSIsInNob3VsZFJldHJ5VXBsb2FkIiwid2FpdFRpbWUiLCJNYXRoIiwibWluIiwicG93IiwiY29udmVydFNpbmdsZSIsInRhc2siLCJvblByb2dyZXNzIiwiUEFSU0lORyIsIm5hbWUiLCJpc1ZhbGlkVXJsIiwicGFyc2VkSW5mbyIsInBhcnNlZFZpZGVvSW5mbyIsInZpZGVvVGl0bGUiLCJGQUlMRUQiLCJlcnJvck1zZyIsImNvbXBsZXRlZEF0IiwiRGF0ZSIsIlVQTE9BRElORyIsIlNVQ0NFU1MiLCJ1cGxvYWRSZXN1bHQiLCJjbGVhbnVwQWZ0ZXJUYXNrQ29tcGxldGlvbiIsImNvbnZlcnRCYXRjaCIsImJhdGNoVGFzayIsInRvdGFsVGFza3MiLCJ0YXNrcyIsImNvbXBsZXRlZFRhc2tzIiwiaSIsInVwZGF0ZWRUYXNrIiwicHJvZ3Jlc3MiLCJ0YXNrUHJvZ3Jlc3MiLCJvdmVyYWxsUHJvZ3Jlc3MiLCJjbGVhblRpdGxlIiwicmVwbGFjZSIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwidGVzdFdlYkRBVkNvbm5lY3Rpb24iLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZXJ2ZXJVcmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidG9TdHJpbmciLCJqc29uIiwiZ2VuZXJhdGVUYXNrSWQiLCJub3ciLCJyYW5kb20iLCJzdWJzdHIiLCJnZW5lcmF0ZUJhdGNoSWQiLCJwYXJzZVZpZGVvVXJscyIsImxpbmVzIiwic3BsaXQiLCJ1cmxzIiwibGluZSIsInRyaW1tZWQiLCJwdXNoIiwiaW5wdXQiLCJ1cmxSZWdleCIsIm1hdGNoZXMiLCJtYXRjaCIsImVzdGltYXRlRmlsZVNpemUiLCJkdXJhdGlvbiIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJrIiwic2l6ZXMiLCJmbG9vciIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwiZm9ybWF0RHVyYXRpb24iLCJzZWNvbmRzIiwiaG91cnMiLCJtaW51dGVzIiwic2VjcyIsInBhZFN0YXJ0IiwicHJvdmlkZWRGb3JtYXQiLCJ2YWxpZEZvcm1hdHMiLCJ0b0xvd2VyQ2FzZSIsInVybEZvcm1hdCIsImV4dHJhY3RGb3JtYXRGcm9tVXJsIiwidXJsT2JqIiwicGF0aG5hbWUiLCJsYXN0RG90SW5kZXgiLCJsYXN0SW5kZXhPZiIsImV4dGVuc2lvbiIsImUiLCJpc1ZhbGlkVmlkZW9Gb3JtYXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/conversion.ts\n"));

/***/ })

});